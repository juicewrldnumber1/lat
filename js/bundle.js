```
!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=19)}([function(e,t,n){var i=t.global=n(23),a=t.hasBuffer=i&&!!i.isBuffer,r=t.hasArrayBuffer="undefined"!=typeof ArrayBuffer,o=t.isArray=n(1);t.isArrayBuffer=r?function(e){return e instanceof ArrayBuffer||p(e)}:y;var s=t.isBuffer=a?i.isBuffer:y,l=t.isView=r?ArrayBuffer.isView||v("ArrayBuffer","buffer"):y;t.alloc=f,t.concat=function(e,n){n||(n=0,Array.prototype.forEach.call(e,(function(e){n+=e.length})));var i=this!==t&&this||e[0],a=f.call(i,n),r=0;return Array.prototype.forEach.call(e,(function(e){r+=d.copy.call(e,a,r)})),a},t.from=function(e){return"string"==typeof e?m.call(this,e):g(this).from(e)};var c=t.Array=n(26),h=t.Buffer=n(27),u=t.Uint8Array=n(28),d=t.prototype=n(6);function f(e){return g(this).alloc(e)}var p=v("ArrayBuffer");function m(e){var t=3*e.length,n=f.call(this,t),i=d.write.call(n,e);return t!==i&&(n=d.slice.call(n,0,i)),n}function g(e){return s(e)?h:l(e)?u:o(e)?c:a?h:r?u:c}function y(){return!1}function v(e,t){return e="[object "+e+"]",function(n){return null!=n&&{}.toString.call(t?n[t]:n)===e}}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){var i=n(1);t.createCodec=s,t.install=function(e){for(var t in e)r.prototype[t]=o(r.prototype[t],e[t])},t.filter=function(e){return i(e)?function(e){return e=e.slice(),function(n){return e.reduce(t,n)};function t(e,t){return t(e)}}(e):e};var a=n(0);function r(e){if(!(this instanceof r))return new r(e);this.options=e,this.init()}function o(e,t){return e&&t?function(){return e.apply(this,arguments),t.apply(this,arguments)}:e||t}function s(e){return new r(e)}r.prototype.init=function(){var e=this.options;return e&&e.uint8array&&(this.bufferish=a.Uint8Array),this},t.preset=s({preset:!0})},function(e,t,n){var i=n(4).ExtBuffer,a=n(30),r=n(31),o=n(2);function s(){var e=this.options;return this.encode=function(e){var t=r.getWriteType(e);return function(e,n){var i=t[typeof n];if(!i)throw new Error('Unsupported type "'+typeof n+'": '+n);i(e,n)}}(e),e&&e.preset&&a.setExtPackers(this),this}o.install({addExtPacker:function(e,t,n){n=o.filter(n);var a=t.name;if(a&&"Object"!==a){(this.extPackers||(this.extPackers={}))[a]=r}else{(this.extEncoderList||(this.extEncoderList=[])).unshift([t,r])}function r(t){return n&&(t=n(t)),new i(t,e)}},getExtPacker:function(e){var t=this.extPackers||(this.extPackers={}),n=e.constructor,i=n&&n.name&&t[n.name];if(i)return i;for(var a=this.extEncoderList||(this.extEncoderList=[]),r=a.length,o=0;o<r;o++){var s=a[o];if(n===s[0])return s[1]}},init:s}),t.preset=s.call(o.preset)},function(e,t,n){t.ExtBuffer=function e(t,n){if(!(this instanceof e))return new e(t,n);this.buffer=i.from(t),this.type=n};var i=n(0)},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,i,a){var r,o,s=8*a-i-1,l=(1<<s)-1,c=l>>1,h=-7,u=n?a-1:0,d=n?-1:1,f=e[t+u];for(u+=d,r=f&(1<<-h)-1,f>>=-h,h+=s;h>0;r=256*r+e[t+u],u+=d,h-=8);for(o=r&(1<<-h)-1,r>>=-h,h+=i;h>0;o=256*o+e[t+u],u+=d,h-=8);if(0===r)r=1-c;else{if(r===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,i),r-=c}return(f?-1:1)*o*Math.pow(2,r-i)},t.write=function(e,t,n,i,a,r){var o,s,l,c=8*r-a-1,h=(1<<c)-1,u=h>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:r-1,p=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+u>=1?d/l:d*Math.pow(2,1-u))*l>=2&&(o++,l/=2),o+u>=h?(s=0,o=h):o+u>=1?(s=(t*l-1)*Math.pow(2,a),o+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,a),o=0));a>=8;e[n+f]=255&s,f+=p,s/=256,a-=8);for(o=o<<a|s,c+=a;c>0;e[n+f]=255&o,f+=p,o/=256,c-=8);e[n+f-p]|=128*m}},function(e,t,n){var i,a=n(29);t.copy=c,t.slice=h,t.toString=function(e,t,n){var i=!s&&r.isBuffer(this)?this.toString:a.toString;return i.apply(this,arguments)},t.write=(i="write",function(){var e=this[i]||a[i];return e.apply(this,arguments)});var r=n(0),o=r.global,s=r.hasBuffer&&"TYPED_ARRAY_SUPPORT"in o,l=s&&!o.TYPED_ARRAY_SUPPORT;function c(e,t,n,i){var o=r.isBuffer(this),s=r.isBuffer(e);if(o&&s)return this.copy(e,t,n,i);if(l||o||s||!r.isView(this)||!r.isView(e))return a.copy.call(this,e,t,n,i);var c=n||null!=i?h.call(this,n,i):this;return e.set(c,t),c.length}function h(e,t){var n=this.slice||!l&&this.subarray;if(n)return n.call(this,e,t);var i=r.alloc.call(this,t-e);return c.call(this,i,0,e,t),i}},function(e,t,n){(function(e){!function(t){var n,i=void 0!==e&&e,a="undefined"!=typeof Uint8Array&&Uint8Array,r="undefined"!=typeof ArrayBuffer&&ArrayBuffer,o=[0,0,0,0,0,0,0,0],s=Array.isArray||function(e){return!!e&&"[object Array]"==Object.prototype.toString.call(e)},l=4294967296;function c(e,s,c){var w=s?0:4,b=s?4:0,x=s?0:3,S=s?1:2,E=s?2:1,I=s?3:0,T=s?g:v,M=s?y:k,P=A.prototype,B="is"+e,C="_"+B;return P.buffer=void 0,P.offset=0,P[C]=!0,P.toNumber=O,P.toString=function(e){var t=this.buffer,n=this.offset,i=R(t,n+w),a=R(t,n+b),r="",o=!c&&2147483648&i;o&&(i=~i,a=l-a);e=e||10;for(;;){var s=i%e*l+a;if(i=Math.floor(i/e),a=Math.floor(s/e),r=(s%e).toString(e)+r,!i&&!a)break}o&&(r="-"+r);return r},P.toJSON=O,P.toArray=h,i&&(P.toBuffer=u),a&&(P.toArrayBuffer=d),A[B]=function(e){return!(!e||!e[C])},t[e]=A,A;function A(e,t,i,s){return this instanceof A?function(e,t,i,s,c){a&&r&&(t instanceof r&&(t=new a(t)),s instanceof r&&(s=new a(s)));if(!(t||i||s||n))return void(e.buffer=m(o,0));if(!f(t,i)){c=i,s=t,i=0,t=new(n||Array)(8)}if(e.buffer=t,e.offset=i|=0,void 0===s)return;"string"==typeof s?function(e,t,n,i){var a=0,r=n.length,o=0,s=0;"-"===n[0]&&a++;var c=a;for(;a<r;){var h=parseInt(n[a++],i);if(!(h>=0))break;s=s*i+h,o=o*i+Math.floor(s/l),s%=l}c&&(o=~o,s?s=l-s:o++);D(e,t+w,o),D(e,t+b,s)}(t,i,s,c||10):f(s,c)?p(t,i,s,c):"number"==typeof c?(D(t,i+w,s),D(t,i+b,c)):s>0?T(t,i,s):s<0?M(t,i,s):p(t,i,o,0)}(this,e,t,i,s):new A(e,t,i,s)}function O(){var e=this.buffer,t=this.offset,n=R(e,t+w),i=R(e,t+b);return c||(n|=0),n?n*l+i:i}function D(e,t,n){e[t+I]=255&n,n>>=8,e[t+E]=255&n,n>>=8,e[t+S]=255&n,n>>=8,e[t+x]=255&n}function R(e,t){return 16777216*e[t+x]+(e[t+S]<<16)+(e[t+E]<<8)+e[t+I]}}function h(e){var t=this.buffer,i=this.offset;return n=null,!1!==e&&0===i&&8===t.length&&s(t)?t:m(t,i)}function u(t){var a=this.buffer,r=this.offset;if(n=i,!1!==t&&0===r&&8===a.length&&e.isBuffer(a))return a;var o=new i(8);return p(o,0,a,r),o}function d(e){var t=this.buffer,i=this.offset,o=t.buffer;if(n=a,!1!==e&&0===i&&o instanceof r&&8===o.byteLength)return o;var s=new a(8);return p(s,0,t,i),s.buffer}function f(e,t){var n=e&&e.length;return t|=0,n&&t+8<=n&&"string"!=typeof e[t]}function p(e,t,n,i){t|=0,i|=0;for(var a=0;a<8;a++)e[t++]=255&n[i++]}function m(e,t){return Array.prototype.slice.call(e,t,t+8)}function g(e,t,n){for(var i=t+8;i>t;)e[--i]=255&n,n/=256}function y(e,t,n){var i=t+8;for(n++;i>t;)e[--i]=255&-n^255,n/=256}function v(e,t,n){for(var i=t+8;t<i;)e[t++]=255&n,n/=256}function k(e,t,n){var i=t+8;for(n++;t<i;)e[t++]=255&-n^255,n/=256}c("Uint64BE",!0,!0),c("Int64BE",!0,!1),c("Uint64LE",!1,!0),c("Int64LE",!1,!1)}("string"!=typeof t.nodeName?t:this||{})}).call(this,n(11).Buffer)},function(e,t,n){var i=n(4).ExtBuffer,a=n(33),r=n(16).readUint8,o=n(34); // Removed unused `s` variable from `n(2)` and unused `l` function. Moved `s` to be an install function directly onto `t`.

function l(){var e=this.options;return this.decode=function(e){var t=o.getReadToken(e);return function(e){var n=r(e),i=t[n];if(!i)throw new Error("Invalid type: "+(n?"0x"+n.toString(16):n));return i(e)}}(e),e&&e.preset&&a.setExtUnpackers(this),this}

// Install directly on `t` rather than on `s`.
t.install = {
  addExtUnpacker: function(e,t){(this.extUnpackers||(this.extUnpackers=[]))[e]=n(2).filter(t)}, // Use n(2).filter directly
  getExtUnpacker: function(e){return(this.extUnpackers||(this.extUnpackers=[]))[e]||function(t){return new i(t,e)}},
  init:l
};

// Moved 's' (n(2)) to the beginning of the `install` call.
n(2).install(t.install);
t.preset=l.call(n(2).preset)},function(e,t,n){t.encode=function(e,t){var n=new i(t);return n.write(e),n.read()};var i=n(10).EncodeBuffer},function(e,t,n){t.EncodeBuffer=a;var i=n(3).preset;function a(e){if(!(this instanceof a))return new a(e);if(e&&(this.options=e,e.codec)){var t=this.codec=e.codec;t.bufferish&&(this.bufferish=t.bufferish)}}n(13).FlexEncoder.mixin(a.prototype),a.prototype.codec=i,a.prototype.write=function(e){this.codec.encode(this,e)}},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var i=n(25),a=n(5),r=n(1);function o(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return c(this,e,t,n)}function c(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=d(e,t);return e}(e,t,n,i):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|p(t,n),a=(e=s(e,i)).write(t,n);a!==i&&(e=e.slice(0,a));return e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|f(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?s(e,0):d(e,t);if("Buffer"===t.type&&r(t.data))return d(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t){if(h(t),e=s(e,t<0?0:0|f(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|f(t.length);e=s(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function f(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(e).length;default:if(i)return V(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return B(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return M(this,t,n);case"latin1":case"binary":return P(this,t,n);case"base64":return I(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function g(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function y(e,t,n,i,a){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:v(e,t,n,i,a);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,i,a);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,i,a){var r,o=1,s=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(a){var h=-1;for(r=n;r<s;r++)if(c(e,r)===c(t,-1===h?0:r-h)){if(-1===h&&(h=r),r-h+1===l)return h*o}else-1!==h&&(r-=r-h),h=-1}else for(n+l>s&&(n=s-l),r=n;r>=0;r--){for(var u=!0,d=0;d<l;d++)if(c(e,r+d)!==c(t,d)){u=!1;break}if(u)return r}return-1}function k(e,t,n,i){n=Number(n)||0;var a=e.length-n;i?(i=Number(i))>a&&(i=a):i=a;var r=t.length;if(r%2!=0)throw new TypeError("Invalid hex string");i>r/2&&(i=r/2);for(var o=0;o<i;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function w(e,t,n,i){return N(V(t,e.length-n),e,n,i)}function b(e,t,n,i){return N(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function x(e,t,n,i){return b(e,t,n,i)}function S(e,t,n,i){return N(F(t),e,n,i)}function E(e,t,n,i){return N(function(e,t){for(var n,i,a,r=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),i=n>>8,a=n%256,r.push(a),r.push(i);return r}(t,e.length-n),e,n,i)}function I(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);for(var i=[],a=t;a<n;){var r,o,s,l,c=e[a],h=null,u=c>239?4:c>223?3:c>191?2:1;if(a+u<=n)switch(u){case 1:c<128&&(h=c);break;case 2:128==(192&(r=e[a+1]))&&(l=(31&c)<<6|63&r)>127&&(h=l);break;case 3:r=e[a+1],o=e[a+2],128==(192&r)&&128==(192&o)&&(l=(15&c)<<12|(63&r)<<6|63&o)>2047&&(l<55296||l>57343)&&(h=l);break;case 4:r=e[a+1],o=e[a+2],s=e[a+3],128==(192&r)&&128==(192&o)&&128==(192&s)&&(l=(15&c)<<18|(63&r)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(h=l)}null===h?(h=65533,u=1):h>65535&&(h-=65536,i.push(h>>>10&1023|55296),h=56320|1023&h),i.push(h),a+=u}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=4096));return n}(i)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return c(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return function(e,t,n,i){return h(t),t<=0?s(e,t):void 0!==n?"string"==typeof i?s(e,t).fill(n,i):s(e,t).fill(n):s(e,t)}(null,e,t,n)},l.allocUnsafe=function(e){return u(null,e)},l.allocUnsafeSlow=function(e){return u(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,a=0,r=Math.min(n,i);a<r;++a)if(e[a]!==t[a]){n=e[a],i=t[a];break}return n<i?-1:i<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!r(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=l.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var o=e[n];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,a),a+=o.length}return i},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):m.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,i,a){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===a&&(a=this.length),t<0||n>e.length||i<0||a>this.length)throw new RangeError("out of range index");if(i>=a&&t>=n)return 0;if(i>=a)return-1;if(t>=n)return 1;if(this===e)return 0;for(var r=(a>>>=0)-(i>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(r,o),c=this.slice(i,a),h=e.slice(t,n),u=0;u<s;++u)if(c[u]!==h[u]){r=c[u],o=h[u];break}return r<o?-1:o<r?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},l.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var r=!1;;)switch(i){case"hex":return k(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return x(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(r)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),r=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(e,t,n){var i="";n=Math.min(e.length,n);for(var a=t;a<n;++a)i+=String.fromCharCode(127&e[a]);return i}function P(e,t,n){var i="";n=Math.min(e.length,n);for(var a=t;a<n;++a)i+=String.fromCharCode(e[a]);return i}function B(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var a="",r=t;r<n;++r)a+=H(e[r]);return a}function C(e,t,n){for(var i=e.slice(t,n),a="",r=0;r<i.length;r+=2)a+=String.fromCharCode(i[r]+256*i[r+1]);return a}function A(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,i,a,r){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<r)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function D(e,t,n,i){t<0&&(t=65535+t+1);for(var a=0,r=Math.min(e.length-n,2);a<r;++a)e[n+a]=(t&255<<8*(i?a:1-a))>>>8*(i?a:1-a)}function R(e,t,n,i){t<0&&(t=4294967295+t+1);for(var a=0,r=Math.min(e.length-n,4);a<r;++a)e[n+a]=t>>>8*(i?a:3-a)&255}function _(e,t,n,i,a,r){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(e,t,n,i,r){return r||_(e,0,n,4),a.write(e,t,n,i,23,4),n+4}function L(e,t,n,i,r){return r||_(e,0,n,8),a.write(e,t,n,i,52,8),n+8}l.prototype.slice=function(e,t){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var a=t-e;n=new l(a,void 0);for(var r=0;r<a;++r)n[r]=this[r+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var i=this[e],a=1,r=0;++r<t&&(a*=256);)i+=this[e+r]*a;return i},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var i=this[e+--t],a=1;t>0&&(a*=256);)i+=this[e+--t]*a;return i},l.prototype.readUInt8=function(e,t){return t||A(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||A(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||A(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var i=this[e],a=1,r=0;++r<t&&(a*=256);)i+=this[e+r]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var i=t,a=1,r=this[e+--i];i>0&&(a*=256);)r+=this[e+--i]*a;return r>=(a*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readInt8=function(e,t){return t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||A(e,4,this.length),a.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||A(e,4,this.length),a.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||A(e,8,this.length),a.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||A(e,8,this.length),a.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||O(this,e,t,n,Math.pow(2,8*n)-1,0);var a=1,r=0;for(this[t]=255&e;++r<n&&(a*=256);)this[t+r]=e/a&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||O(this,e,t,n,Math.pow(2,8*n)-1,0);var a=n-1,r=1;for(this[t+a]=255&e;--a>=0&&(r*=256);)this[t+a]=e/r&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var a=Math.pow(2,8*n-1);O(this,e,t,n,a-1,-a)}var r=0,o=1,s=0;for(this[t]=255&e;++r<n&&(o*=256);)e<0&&0===s&&0!==this[t+r-1]&&(s=1),this[t+r]=(e/o>>0)-s&255;return t+n},l.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var a=Math.pow(2,8*n-1);O(this,e,t,n,a-1,-a)}var r=n-1,o=1,s=0;for(this[t+r]=255&e;--r>=0&&(o*=256);)e<0&&0===s&&0!==this[t+r+1]&&(s=1),this[t+r]=(e/o>>0)-s&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var a,r=i-n;if(this===e&&n<t&&t<i)for(a=r-1;a>=0;--a)e[a+t]=this[a+n];else if(r<1e3||!l.TYPED_ARRAY_SUPPORT)for(a=0;a<r;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+r),t);return r},l.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var r;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(r=t;r<n;++r)this[r]=e;else{var o=l.isBuffer(e)?e:V(new l(e,i).toString()),s=o.length;for(r=0;r<n-t;++r)this[r+t]=o[r%s]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function H(e){return e<16?"0"+e.toString(16):e.toString(16)}function V(e,t){var n;t=t||1/0;for(var i=e.length,a=null,r=[],o=0;o<i;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&r.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&r.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&r.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&r.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;r.push(n)}else if(n<2048){if((t-=2)<0)break;r.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;r.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;r.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return r}function F(e){return i.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function N(e,t,n,i){for(var a=0;a<i&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}}).call(this,n(24))},function(e,t){for(var n=t.uint8=new Array(256),i=0;i<=255;i++)n[i]=a(i);function a(e){return function(t){var n=t.reserve(1);t.buffer[n]=e}}},function(e,t,n){t.FlexDecoder=a,t.FlexEncoder=r;var i=n(0);function a(){if(!(this instanceof a))return new a}function r(){if(!(this instanceof r))return new r}function o(){throw new Error("method not implemented: write()")}function s(){throw new Error("method not implemented: fetch()")}function l(){return this.buffers&&this.buffers.length?(this.flush(),this.pull()):this.fetch()}function c(e){(this.buffers||(this.buffers=[])).push(e)}function h(){return(this.buffers||(this.buffers=[])).shift()}function u(e){return function(t){for(var n in e)t[n]=e[n];return t}}a.mixin=u({bufferish:i,write:function(e){var t=this.offset?i.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=t?e?this.bufferish.concat([t,e]):t:e,this.offset=0},fetch:s,flush:function(){for(;this.offset<this.buffer.length;){var e,t=this.offset;try{e=this.fetch()}catch(e){if(e&&"BUFFER_SHORTAGE"!=e.message)throw e;this.offset=t;break}this.push(e)}},push:c,pull:h,read:l,reserve:function(e){var t=this.offset,n=t+e;if(n>this.buffer.length)throw new Error("BUFFER_SHORTAGE");return this.offset=n,t},offset:0}),a.mixin(a.prototype),r.mixin=u({bufferish:i,write:o,fetch:function(){var e=this.start;if(e<this.offset){var t=this.start=this.offset;return i.prototype.slice.call(this.buffer,e,t)}},flush:function(){for(;this.start<this.offset;){var e=this.fetch();e&&this.push(e)}},push:c,pull:function(){var e=this.buffers||(this.buffers=[]),t=e.length>1?this.bufferish.concat(e):e[0];return e.length=0,t},read:l,reserve:function(e){var t=0|e;if(this.buffer){var n=this.buffer.length,i=0|this.offset,a=i+t;if(a<n)return this.offset=a,i;this.flush(),e=Math.max(e,Math.min(2*n,this.maxBufferSize))}return e=Math.max(e,this.minBufferSize),this.buffer=this.bufferish.alloc(e),this.start=0,this.offset=t,0},send:function(e){var t=e.length;if(t>this.minBufferSize)this.flush(),this.push(e);else{var n=this.reserve(t);i.prototype.copy.call(e,this.buffer,n)}},maxBufferSize:65536,minBufferSize:2048,offset:0,start:0}),r.mixin(r.prototype)},function(e,t,n){t.decode=function(e,t){var n=new i(t);return n.write(e),n.read()};var i=n(15).DecodeBuffer},function(e,t,n){t.DecodeBuffer=a;var i=n(8).preset;function a(e){if(!(this instanceof a))return new a(e);if(e&&(this.options=e,e.codec)){var t=this.codec=e.codec;t.bufferish&&(this.bufferish=t.bufferish)}}n(13).FlexDecoder.mixin(a.prototype),a.prototype.codec=i,a.prototype.fetch=function(){return this.codec.decode(this)}},function(e,t,n){var i=n(5),a=n(7),r=a.Uint64BE,o=a.Int64BE;t.getReadFormat=function(e){var t=s.hasArrayBuffer&&e&&e.binarraybuffer,n=e&&e.int64;return{map:c&&e&&e.usemap?u:h,array:d,str:f,bin:t?m:p,ext:g,uint8:y,uint16:k,uint32:b,uint64:S(8,n?T:E),int8:v,int16:w,int32:x,int64:S(8,n?M:I),float32:S(4,P),float64:S(8,B)}},t.readUint8=y;var s=n(0),l=n(6),c="undefined"!=typeof Map;function h(e,t){var n,i={},a=new Array(t),r=new Array(t),o=e.codec.decode;for(n=0;n<t;n++)a[n]=o(e),r[n]=o(e);for(n=0;n<t;n++)i[a[n]]=r[n];return i}function u(e,t){var n,i=new Map,a=new Array(t),r=new Array(t),o=e.codec.decode;for(n=0;n<t;n++)a[n]=o(e),r[n]=o(e);for(n=0;n<t;n++)i.set(a[n],r[n]);return i}function d(e,t){for(var n=new Array(t),i=e.codec.decode,a=0;a<t;a++)n[a]=i(e);return n}function f(e,t){var n=e.reserve(t),i=n+t;return l.toString.call(e.buffer,"utf-8",n,i)}function p(e,t){var n=e.reserve(t),i=n+t,a=l.slice.call(e.buffer,n,i);return s.from(a)}function m(e,t){var n=e.reserve(t),i=n+t,a=l.slice.call(e.buffer,n,i);return s.Uint8Array.from(a).buffer}function g(e,t){var n=e.reserve(t+1),i=e.buffer[n++],a=n+t,r=e.codec.getExtUnpacker(i);if(!r)throw new Error("Invalid ext type: "+(i?"0x"+i.toString(16):i));return r(l.slice.call(e.buffer,n,a))}function y(e){var t=e.reserve(1);return e.buffer[t]}function v(e){var t=e.reserve(1),n=e.buffer[t];return 128&n?n-256:n}function k(e){var t=e.reserve(2),n=e.buffer;return n[t++]<<8|n[t]}function w(e){var t=e.reserve(2),n=e.buffer,i=n[t++]<<8|n[t];return 32768&i?i-65536:i}function b(e){var t=e.reserve(4),n=e.buffer;return 16777216*n[t++]+(n[t++]<<16)+(n[t++]<<8)+n[t]}function x(e){var t=e.reserve(4),n=e.buffer;return n[t++]<<24|n[t++]<<16|n[t++]<<8|n[t]}function S(e,t){return function(n){var i=n.reserve(e);return t.call(n.buffer,i,!0)}}function E(e){return new r(this,e).toNumber()}function I(e){return new o(this,e).toNumber()}function T(e){return new r(this,e)}function M(e){return new o(this,e)}function P(e){return i.read(this,e,!1,23,4)}function B(e){return i.read(this,e,!1,52,8)}},function(e,t,n){!function(t){e.exports=t;var n={on:function(e,t){return r(this,e).push(t),this},once:function(e,t){var n=this;return i.originalListener=t,r(n,e).push(i),n;function i(){a.call(n,e,i),t.apply(this,arguments)}},off:a,emit:function(e,t){var n=this,i=r(n,e,!0);if(!i)return!1;var a=arguments.length;if(1===a)i.forEach(s);else if(2===a)i.forEach(l);else{var o=Array.prototype.slice.call(arguments,1);i.forEach(c)}return!!i.length;function s(e){e.call(n)}function l(e){e.call(n,t)}function c(e){e.apply(n,o)}}};function i(e){for(var t in n)e[t]=n[t];return e}function a(e,t){var n,i=this;if(arguments.length){if(t){if(n=r(i,e,!0)){if(!(n=n.filter(o)).length)return a.call(i,e);i.listeners[e]=n}}else if((n=i.listeners)&&(delete n[e],!Object.keys(n).length))return a.call(i)}else delete i.listeners;return i;function o(e){return e!==t&&e.originalListener!==t}}function r(e,t,n){if(!n||e.listeners){var i=e.listeners||(e.listeners={});return i[t]||(i[t]=[])}}i(t.prototype),t.mixin=i}((
/**
 * event-lite.js - Light-weight EventEmitter (less than 1KB when gzipped)
 *
 * @copyright Yusuke Kawasaki
 * @license MIT
 * @constructor
 * @see https://github.com/kawanet/event-lite
 * @see http://kawanet.github.io/event-lite/EventLite.html
 * @example
 * var EventLite = require("event-lite");
 *
 * function MyClass() {...}             // your class
 *
 * EventLite.mixin(MyClass.prototype);  // import event methods
 *
 * var obj = new MyClass();
 * obj.on("foo", function() {...});     // add event listener
 * obj.once("bar", function() {...});   // add one-time event listener
 * obj.emit("foo");                     // dispatch event
 * obj.emit("bar");                     // dispatch another event
 * obj.off("foo");                      // remove event listener
 */
function e(){if(!(this instanceof e))return new e}))},function(e,t,n){const i=n(49).words,a=n(50).array;e.exports=class{constructor(e={}){Object.assign(this,{list:e.emptyList&&[]||Array.prototype.concat.apply(i,[a,e.list||[]]),exclude:e.exclude||[],splitRegex:e.splitRegex||/\b/,placeHolder:e.placeHolder||"*",regex:e.regex||/[^a-zA-Z0-9|\$|\@]|\^/g,replaceRegex:e.replaceRegex||/\w/g})}isProfane(e){return this.list.filter(t=>{const n=new RegExp(`\\b${t.replace(/(\W)/g,"\\$1")}\\b`,"gi");return!this.exclude.includes(t.toLowerCase())&&n.test(e)}).length>0||!1}replaceWord(e){return e.replace(this.regex,"").replace(this.replaceRegex,this.placeHolder)}clean(e){return e.split(this.splitRegex).map(e=>this.isProfane(e)?this.replaceWord(e):e).join(this.splitRegex.exec(e)[0])}addWords(){let e=Array.from(arguments);this.list.push(...e),e.map(e=>e.toLowerCase()).forEach(e=>{this.exclude.includes(e)&&this.exclude.splice(this.exclude.indexOf(e),1)})}removeWords(){this.exclude.push(...Array.from(arguments).map(e=>e.toLowerCase()))}}},function(e,t,n){"use strict";function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,s(i.key),i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=l(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c,h;c="undefined"!=typeof globalThis?globalThis:window,"object"===l((h=c.process||{}).env)&&null!==h.env||(h.env={}),Array.isArray(h.argv)||(h.argv=[]),h.browser=!0,h.title="browser","function"!=typeof h.nextTick&&(h.nextTick=function(e){return setTimeout(e,0)}),c.process=h,window.loadedScript=!0,n(20);var u=n(21),d=n(39),f=n(40),p=n(41),m=n(44),g=n(45),y=n(47),v=n(48),k=n(54),w=n(56),b=n(58),x=n(59),S=n(18),E=new f.TextManager;"undefined"!=typeof window&&"function"==typeof fetch&&setInterval((function(){fetch("/ping",{cache:"no-store"}).catch((function(){}))}),5e4),window.onload=function(){var e;ln("Connecting..."),function(){var e=document.querySelector('.menuButton.primaryButton[onclick*="showAuthModal(true)"]'),t=document.querySelector('.menuButton.secondaryButton[onclick*="showAuthModal(false)"]'),n=document.getElementById("authSubmitBtn"),i=document.getElementById("logoutBtn"),a=document.getElementById("authModal");e&&(e.removeAttribute("onclick"),e.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),L(!0)})));t&&(t.removeAttribute("onclick"),t.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),L(!1)})));n&&(n.removeAttribute("onclick"),n.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),V()})));if(a){var r=a.querySelector('span[onclick*="hideAuthModal"]');r&&(r.removeAttribute("onclick"),r.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),U()}))),a.addEventListener("click",(function(e){e.target===a&&U()}))}i&&i.addEventListener("click",(function(e){e.preventDefault(),F()}));console.log("[Auth] Button listeners initialized")}(),!0,e=window.__MOOMOO_CONFIG__&&window.__MOOMOO_CONFIG__.WS_URL?window.__MOOMOO_CONFIG__.WS_URL:"undefined"!=typeof WS_SERVER_URL&&WS_SERVER_URL?WS_SERVER_URL:window.location.href.replace(/^http:/,"ws:").replace(/^https:/,"wss:"),u.connect(e,(function(e){Dr(),setInterval(Dr,2500),e?sn(e):(!0,function(){d.hookTouchEvents(nt),nt.onclick=d.checkTrusted((function(){ce("moo_name",Ot.value),ce("moo_skin",Qe),!et&&$()&&(et=!0,ae=Date.now(),ln("Entering..."),u.send("M",{name:Ot.value,moofoll:me,skin:Qe}))})),d.hookTouchEvents(it),it.onclick=d.checkTrusted((function(){"inline-block"==wi.style.display?(bt.style.display="inline-block",wi.style.display="none"):(bt.style.display="none",wi.style.display="inline-block")})),rt.onclick=d.checkTrusted((function(){setTimeout((function(){Z()}),10)})),d.hookTouchEvents(rt),ot&&(ot.onclick=d.checkTrusted((function(){setTimeout((function(){ee()}),10)})),d.hookTouchEvents(ot));var e=document.getElementById("settingsJoinPartyBtn"),t=document.getElementById("settingsCreatePartyBtn");e&&(e.onclick=d.checkTrusted((function(){Z()})),d.hookTouchEvents(e)),t&&(t.onclick=d.checkTrusted((function(){ee()})),d.hookTouchEvents(t)),st.onclick=d.checkTrusted((function(){bt.classList.contains("showing")?(bt.classList.remove("showing"),lt.innerText="Settings"):(bt.classList.add("showing"),lt.innerText="Close")})),d.hookTouchEvents(st),ct.onclick=d.checkTrusted((function(){"block"!=Ht.style.display?xn():Ht.style.display="none"})),d.hookTouchEvents(ct),ut.onclick=d.checkTrusted((function(){"block"!=Xt.style.display?(Xt.style.display="block",Ht.style.display="none",$n(),jn(),_n()):Xt.style.display="none"})),d.hookTouchEvents(ut),dt.onclick=d.checkTrusted((function(){Kn()})),d.hookTouchEvents(dt),Nt.onclick=d.checkTrusted((function(){vi()})),d.hookTouchEvents(Nt);var n=document.querySelectorAll(".tabButton");n.forEach((function(e){e.addEventListener("click",(function(){n.forEach((function(e){e.classList.remove("active")})),document.querySelectorAll(".tabContent").forEach((function(e){e.classList.remove("active")})),this.classList.add("active");var e=this.getAttribute("data-tab"),t=document.getElementById(e+"Tab");t&&t.classList.add("active")})),d.hookTouchEvents(e)}));var i=document.getElementById("previewCanvas"),a=document.getElementById("characterPreview"),r=document.getElementById("skinColorPicker");if(i&&a){var o=function(){var e=i.width,t=e/2,n=.35*e,a=.12*e,r=Math.PI/4,o=1*n;s.clearRect(0,0,e,e),s.save(),s.translate(t-.05*e,t+.05*e),s.rotate(-Math.PI/4*2),s.fillStyle=p.skinColors[Qe],s.strokeStyle="#494947",s.lineWidth=.06*e,s.beginPath(),s.arc(o*Math.cos(r),o*Math.sin(r),a,0,2*Math.PI),s.fill(),s.stroke(),s.beginPath(),s.arc(o*Math.cos(-r),o*Math.sin(-r),a,0,2*Math.PI),s.fill(),s.stroke(),s.beginPath(),s.arc(0,0,n,0,2*Math.PI),s.fill(),s.stroke(),s.restore()},s=i.getContext("2d");i.width=60,i.height=60,o(),a.addEventListener("click",(function(e){e.stopPropagation(),r.classList.contains("show")})),document.addEventListener("click",(function(e){r&&r.classList.contains("show")&&!r.contains(e.target)&&a.contains(e.target)}));var l=window.selectSkinColor;window.selectSkinColor=function(e){l(e),o()}}var c=document.getElementById("weaponUpgradeSlider"),h=document.getElementById("weaponUpgradeValue");c&&h&&c.addEventListener("input",(function(){h.textContent=this.value}))}(),function(){for(var e=0;e<Gi.length;++e){var t=new Image;t.onload=function(){this.isLoaded=!0},t.src=".././img/icons/"+Gi[e]+".png",Xi[Gi[e]]=t}}(),function(){for(var e=0;e<w.stickers.length;++e){var t=new Image;t.onload=function(){this.isLoaded=!0},t.src=".././img/stickers/"+w.stickers[e].src+".png",la[w.stickers[e].name]=t}}(),xt.style.display="none",wt.style.display="inline-block",Ot.value=he("moo_name")||"",function(){var e=he("native_resolution");Nn(e?"true"==e:"undefined"!=typeof cordova),de="true"==he("show_ping"),Br(),fe="true"==he("below_healthbar"),setInterval((function(){window.cordova&&(document.getElementById("downloadButtonContainer").classList.add("cordova"),document.getElementById("mobileDownloadButtonContainer").classList.add("cordova"))}),1e3),zn(),d.removeAllChildren(Et);for(var t=0;t<g.weapons.length+g.list.length;++t)!function(e){d.generateElement({id:"actionBarItem"+e,class:"actionBarItem",style:"display:none",onmouseout:function(){hn()},parent:Et})}(t);for(t=0;t<g.list.length+g.weapons.length;++t)!function(e){var t=document.createElement("canvas");t.width=t.height=66;var n=t.getContext("2d");if(n.translate(t.width/2,t.height/2),n.imageSmoothingEnabled=!1,n.webkitImageSmoothingEnabled=!1,n.mozImageSmoothingEnabled=!1,g.weapons[e]){var i=document.getElementById("actionBarItem"+e);n.rotate(Math.PI/4+Math.PI),Vn[e]=function(a){!function(i){var a=new Image;a.onload=function(){this.isLoaded=!0,n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),n.restore(),n.globalCompositeOperation="source-over";var i=1/(this.height/this.width),a=g.weapons[e].iPad||1;n.drawImage(this,-t.width*a*p.iconPad*i/2,-t.height*a*p.iconPad/2,t.width*a*i*p.iconPad,t.height*a*p.iconPad),n.fillStyle="rgba(0, 0, 70, 0)",n.globalCompositeOperation="source-atop",n.fillRect(-t.width/2,-t.height/2,t.width,t.height),document.getElementById("actionBarItem"+e).style.backgroundImage="url("+t.toDataURL()+")"};var r=p.weaponVariants[void 0!==i?i:0].src||"";a.src=".././img/weapons/"+g.weapons[e].src+r+".png"}(a),i.onmouseover=d.checkTrusted((function(){hn(g.weapons[e],!0,!1,a)}))},Vn[e](0),i.onclick=d.checkTrusted((function(){ki(e,!0)})),d.hookTouchEvents(i)}else{var a=Va(g.list[e-g.weapons.length],!0),r=Math.min(t.width-p.iconPadding,a.width);n.globalAlpha=1,n.drawImage(a,-r/2,-r/2,r,r),n.fillStyle="rgba(0, 0, 70, 0)",n.globalCompositeOperation="source-atop",n.fillRect(-r/2,-r/2,r,r),document.getElementById("actionBarItem"+e).style.backgroundImage="url("+t.toDataURL()+")",document.getElementById("actionBarItem"+e).style.order=0,(i=document.getElementById("actionBarItem"+e)).onmouseover=d.checkTrusted((function(){hn(g.list[e-g.weapons.length])})),i.onclick=d.checkTrusted((function(){ki(e-g.weapons.length)})),d.hookTouchEvents(i)}}(t);Ot.ontouchstart=d.checkTrusted((function(e){e.preventDefault();var t=prompt("enter name",e.currentTarget.value);e.currentTarget.value=t.slice(0,15)})),mt.checked=ue,mt.onchange=d.checkTrusted((function(e){Nn(e.target.checked)})),gt.checked=de,gt.onchange=d.checkTrusted((function(e){ce("show_ping",(de=gt.checked)?"true":"false"),Br()})),yt.checked=fe,yt.onchange=d.checkTrusted((function(e){ce("below_healthbar",(fe=yt.checked)?"true":"false")})),vt.checked=pe,vt.onchange=d.checkTrusted((function(e){ce("reworkleaderboard",(pe=vt.checked)?"true":"false")}))}(),kr=document.getElementById("performanceDisplay"),wr=document.getElementById("pingValue"),br=document.getElementById("cpsValue"),xr=document.getElementById("fpsValue"),Sr=document.getElementById("packetValue"),document.getElementById("topPingDisplay"),Er=document.getElementById("topPingValue"),Br(),Wn(parseInt(he("moo_skin"))||0),function(){var e=he("moo_account");if(e)try{P=JSON.parse(e),D()}catch(e){P=null,ne()}else ne()}(),P||ne())}),{A:tn,B:sn,C:xi,D:nr,E:ir,a:lr,G:ia,H:Ya,I:$a,J:Qa,K:xa,L:Xa,M:Ga,N:rr,O:or,P:Fi,Q:qi,R:Wi,S:ar,T:Qi,U:Ki,V:Fn,W:sr,X:Ja,Y:Ka,Z:Rr,EX:zi,g:vn,1:bn,2:gn,3:kn,4:wn,5:Rn,6:ei,7:On,8:Si,9:An,0:Or,ADMIN_LOGIN:Di,SHOW_IDS:Ui,IX:Ai,IU:Oi,HL:Ei,SMITE:Ii,SH:Ti,KICKED:Mi,BANNED:Pi,TC:Bi,MM:Ci,AUTH_RESULT:B,REGISTER_RESULT:C,PARTY_CREATED:A,PARTY_JOIN_RESULT:O,DN:M})};var I=!1,T=0;function M(e){I=1===e}var P=null;function B(e){var t=e;t&&(t.success?(P=t.account,ce("moo_account",JSON.stringify(P)),D(),U(),Q("Logged in as "+P.displayName)):H(t.error||"Login failed"))}function C(e){var t=e;t&&(t.success?(P=t.account,ce("moo_account",JSON.stringify(P)),D(),U(),Q("Account created! ID: "+P.accountId)):H(t.error||"Registration failed"))}function A(e){var t=e;if(t&&t.code){Q("Party created! Code: "+t.code);var n=at?at.getElementsByTagName("span")[0]:null;n&&(n.innerText=t.code);var i=document.getElementById("partyCodeDisplay"),a=document.getElementById("partyCodeValue");i&&a&&(a.textContent=t.code,i.style.display="block")}}function O(e){var t=e;t&&(t.success?Q("Joined party: "+t.code):Q("Failed to join party: "+(t.error||"Unknown error")))}function D(){var e=document.getElementById("loginButtons"),t=document.getElementById("accountInfo"),n=document.getElementById("accountIdDisplay"),i=document.getElementById("accountUsernameDisplay"),a=document.getElementById("accountNameDisplay"),r=document.getElementById("accountRankDisplay"),o=document.getElementById("accountKills"),s=document.getElementById("accountDeaths"),l=document.getElementById("accountScore"),c=document.getElementById("accountHighScore"),h=document.getElementById("accountPlayTime"),u=document.getElementById("accountCreatedAt"),d=document.getElementById("banNoticeContainer");d&&d.remove();var f=he("moo_banned");if(f)try{var p=JSON.parse(f),m=Math.ceil((p.endTime-Date.now())/1e3);m>0?function(e,t){var n=document.querySelector(".rightColumn .menuCard");if(!n)return;var i=document.getElementById("banNoticeContainer");i&&i.remove();var a=document.createElement("div");a.id="banNoticeContainer",a.style.cssText="background:#ff2222;color:white;padding:15px;border-radius:8px;margin-bottom:15px;text-align:center;";var r=document.createElement("div");r.style.cssText="font-size:18px;font-weight:bold;margin-bottom:8px;",r.textContent="This account is banned",a.appendChild(r);var o=document.createElement("div");o.style.cssText="font-size:14px;margin-bottom:10px;opacity:0.9;",o.textContent=e,a.appendChild(o);var s=document.createElement("div");s.id="menuBanTimer",s.style.cssText="font-size:16px;font-weight:bold;",s.textContent=R(t),a.appendChild(s),n.insertBefore(a,n.firstChild);var l=setInterval((function(){var e=he("moo_banned");if(!e)return clearInterval(l),void((t=document.getElementById("banNoticeContainer"))&&t.remove());try{var t,n=JSON.parse(e),i=Math.ceil((n.endTime-Date.now())/1e3),a=document.getElementById("menuBanTimer");if(i>0&&a)a.textContent=R(i);else clearInterval(l),deleteVal("moo_banned"),(t=document.getElementById("banNoticeContainer"))&&t.remove()}catch(e){clearInterval(l)}}),1e3)}(p.message,m):deleteVal("moo_banned")}catch(e){deleteVal("moo_banned")}if(P){if(e&&(e.style.display="none"),t&&(t.style.display="block"),n&&(n.textContent="ID: "+P.accountId),i&&(i.textContent="@"+P.username),a&&(a.textContent=P.displayName),r){var g=P.rankName||function(e){switch(e){case 0:return"Player";case 1:return"Helper";case 2:return"Moderator";case 3:return"Staff";case 4:return"Admin";case 5:return"Owner";case 6:return"Zahre";default:return"Player"}}(P.adminLevel);r.textContent=g,r.className="accountRank rank-"+P.adminLevel}o&&(o.textContent=_(P.kills||0)),s&&(s.textContent=_(P.deaths||0)),l&&(l.textContent=_(P.score||0)),c&&(c.textContent=_(P.highestScore||0)),h&&(h.textContent=P.formattedPlayTime||j(P.playTime||0)),u&&(u.textContent=P.formattedCreatedAt||function(e){if(!e)return"-";try{return new Date(e).toLocaleDateString()}catch(e){return"-"}}(P.createdAt))}else e&&(e.style.display="block"),t&&(t.style.display="none");ne()}function R(e){if(e<=0)return"Expired";var t=Math.floor(e/86400),n=Math.floor(e%86400/3600),i=Math.floor(e%3600/60),a=e%60;return t>0?"Unban in: "+t+"d "+n+"h "+i+"m":n>0?"Unban in: "+n+"h "+i+"m "+a+"s":i>0?"Unban in: "+i+"m "+a+"s":"Unban in: "+a+"s"}function _(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}function j(e){var t=Math.floor(e/1e3),n=Math.floor(t/60),i=Math.floor(n/60),a=Math.floor(i/24);return a>0?a+"d "+i%24+"h":i>0?i+"h "+n%60+"m":n>0?n+"m "+t%60+"s":t+"s"}function L(e){var t=document.getElementById("authModal"),n=document.getElementById("authModalTitle"),i=document.getElementById("authSubmitBtn"),a=document.getElementById("displayNameGroup"),r=document.getElementById("emailGroup"),o=document.getElementById("forgotPasswordLink");t&&(t.style.display="flex"),n&&(n.textContent=e?"Sign In":"Create Account"),i&&(i.textContent=e?"Sign In":"Create Account"),a&&(a.style.display=e?"none":"block"),r&&(r.style.display=e?"none":"block"),o&&(o.style.display=e?"block":"none"),window.authIsLogin=e}function U(){var e=document.getElementById("authModal");e&&(e.style.display="none");var t=document.getElementById("authError");t&&(t.style.display="none"),document.getElementById("authUsername").value="",document.getElementById("authPassword").value="",document.getElementById("authDisplayName").value="";var n=document.getElementById("authEmail");n&&(n.value="")}function H(e){var t=document.getElementById("authError");t&&(t.textContent=e,t.style.display="block")}function V(){var e=document.getElementById("authUsername").value.trim(),t=document.getElementById("authPassword").value,n=document.getElementById("authDisplayName").value.trim(),i=document.getElementById("authEmail"),a=i?i.value.trim():"";if(e&&t)if(window.authIsLogin)u.send("AUTH",e,t);else{if(!a)return void H("Email is required for registration");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a))return void H("Please enter a valid email address");u.send("REGISTER",e,t,n||e,a)}else H("Please fill in all required fields")}function F(){P=null,ce("moo_account",""),D(),Q("Logged out")}window.showAuthModal=L,window.hideAuthModal=U,window.submitAuth=V,window.logoutAccount=F;var N="",z="";function W(){var e=document.getElementById("forgotPasswordModal");e&&(e.style.display="none"),q(),N="",z=""}function q(){document.getElementById("forgotStep1").style.display="block",document.getElementById("forgotStep2").style.display="none",document.getElementById("forgotStep3").style.display="none",document.getElementById("forgotEmail").value="",document.getElementById("verifyCode").value="",document.getElementById("newPassword").value="",document.getElementById("confirmPassword").value="",X(),J()}function Y(e){var t=document.getElementById("forgotPasswordError");t&&(t.textContent=e,t.style.display="block"),J()}function X(){var e=document.getElementById("forgotPasswordError");e&&(e.style.display="none")}function G(e){var t=document.getElementById("forgotPasswordSuccess");t&&(t.textContent=e,t.style.display="block"),X()}function J(){var e=document.getElementById("forgotPasswordSuccess");e&&(e.style.display="none")}function K(){var e=document.getElementById("forgotEmail").value.trim();if(e){if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)){N=e;var t=document.getElementById("sendCodeBtn");t&&(t.disabled=!0,t.textContent="Sending..."),fetch("/api/account/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}).then((function(e){return e.json()})).then((function(e){t&&(t.disabled=!1,t.textContent="Send Code"),e.success?(G("Verification code sent to your email"),document.getElementById("forgotStep1").style.display="none",document.getElementById("forgotStep2").style.display="block"):Y(e.message||"Failed to send reset code")})).catch((function(e){t&&(t.disabled=!1,t.textContent="Send Code"),Y("Failed to send reset code. Please try again.")}))}else Y("Please enter a valid email address")}else Y("Please enter your email address")}function Q(e){var t=document.getElementById("notificationDisplay");t&&(t.textContent=e,t.style.display="block",setTimeout((function(){t.style.display="none"}),3e3))}function $(){return u.connected}function Z(){var e=prompt("Enter party code:");e&&e.trim()&&(u.send("JOIN_PARTY",e.trim()),Q("Joining party: "+e.trim()))}function ee(){u.send("CREATE_PARTY"),Q("Creating party...")}window.showForgotPasswordModal=function(){U();var e=document.getElementById("forgotPasswordModal");e&&(e.style.display="flex"),q()},window.hideForgotPasswordModal=W,window.sendResetCode=K,window.resendCode=function(){N&&(document.getElementById("forgotEmail").value=N,document.getElementById("forgotStep2").style.display="none",document.getElementById("forgotStep1").style.display="block",K())},window.verifyResetCode=function(){var e=document.getElementById("verifyCode").value.trim().toUpperCase();if(e&&8===e.length){var t=document.getElementById("verifyCodeBtn");t&&(t.disabled=!0,t.textContent="Verifying..."),fetch("/api/account/verify-reset-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:N,code:e})}).then((function(e){return e.json()})).then((function(e){t&&(t.disabled=!1,t.textContent="Verify Code"),e.success?(z=e.token,G("Code verified! Enter your new password."),document.getElementById("forgotStep2").style.display="none",document.getElementById("forgotStep3").style.display="block"):Y(e.message||"Invalid or expired code")})).catch((function(e){t&&(t.disabled=!1,t.textContent="Verify Code"),Y("Failed to verify code. Please try again.")}))}else Y("Please enter the 8-character verification code")},window.resetPassword=function(){var e=document.getElementById("newPassword").value,t=document.getElementById("confirmPassword").value;if(!e||e.length<8)Y("Password must be at least 8 characters");else if(e===t){var n=document.getElementById("resetPasswordBtn");n&&(n.disabled=!0,n.textContent="Resetting..."),fetch("/api/account/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:z,newPassword:e})}).then((function(e){return e.json()})).then((function(e){n&&(n.disabled=!1,n.textContent="Reset Password"),e.success?(G("Password reset successfully! You can now sign in."),setTimeout((function(){W(),L(!0)}),2e3)):Y(e.message||"Failed to reset password")})).catch((function(e){n&&(n.disabled=!1,n.textContent="Reset Password"),Y("Failed to reset password. Please try again.")}))}else Y("Passwords do not match")},window.joinParty=Z,window.createParty=ee,window.showNotification=Q;var te=null;function ne(){var e;if(P)!1,(e=document.getElementById("nameInput"))&&(e.classList.remove("guest-mode"),e.readOnly=!1);else if(!0,te||(te="Guest#"+Math.floor(1e4+9e4*Math.random())),e=document.getElementById("nameInput")){var t=he("moo_name");e.value=t||te,e.classList.add("guest-mode")}}var ie=0,ae=null,re=0;var oe,se=Math.PI,le=2*se;function ce(e,t){oe&&localStorage.setItem(e,t)}function he(e){return oe?localStorage.getItem(e):null}Math.lerpAngle=function(e,t,n){Math.abs(t-e)>se&&(e>t?t+=le:e+=le);var i=t+(e-t)*n;return i>=0&&i<=le?i:i%le},CanvasRenderingContext2D.prototype.roundRect=function(e,t,n,i,a){return n<2*a&&(a=n/2),i<2*a&&(a=i/2),a<0&&(a=0),this.beginPath(),this.moveTo(e+a,t),this.arcTo(e+n,t,e+n,t+i,a),this.arcTo(e+n,t+i,e,t+i,a),this.arcTo(e,t+i,e,t,a),this.arcTo(e,t,e+n,t,a),this.closePath(),this},"undefined"!=typeof Storage&&(oe=!0);var ue,de,fe,pe,me=he("moofoll");var ge,ye,ve,ke,we,be,xe=1,Se=Date.now(),Ee=[],Ie=[],Te=[],Me=[],Pe=[],Be=[],Ce=[],Ae=[],Oe=!1,De=null,Re=null,_e=new x(b,Pe,Ie,Ee,en,g,p,d),je=n(60),Le=n(61),Ue=new je(Ee,Le,Ie,g,null,p,d),He=Object.create(null);[-1,0,1,2,3].forEach((function(e){He[e]=[]}));var Ve,Fe,Ne,ze,We,qe=1,Ye=0,Xe=0,Ge=0,Je={id:-1,startX:0,startY:0,currentX:0,currentY:0},Ke={id:-1,startX:0,startY:0,currentX:0,currentY:0},Qe=localStorage.getItem("moo_skin")||0,$e=p.maxScreenWidth,Ze=p.maxScreenHeight,et=!1,tt=document.getElementById("mainMenu"),nt=document.getElementById("enterGame"),it=document.getElementById("enterAccount"),at=document.getElementById("partyButton"),rt=document.getElementById("joinPartyButton"),ot=document.getElementById("createPartyButton"),st=document.getElementById("settingsButton"),lt=st.getElementsByTagName("span")[0],ct=document.getElementById("allianceButton");if(at){var ht=at.getElementsByTagName("span")[0];ht&&("undefined"!=typeof window&&window.location?ht.innerText=window.location.host:ht.innerText="")}var ut=document.getElementById("storeButton"),dt=document.getElementById("chatButton"),ft=document.getElementById("gameCanvas"),pt=ft.getContext("2d"),mt=document.getElementById("nativeResolution"),gt=document.getElementById("showPing"),yt=document.getElementById("belowhealthbar"),vt=document.getElementById("reworkleaderboard"),kt=document.getElementById("shutdownDisplay"),wt=document.getElementById("menuCardHolder"),bt=document.getElementById("guideCard"),xt=document.getElementById("loadingText"),St=document.getElementById("gameUI"),Et=document.getElementById("actionBar"),It=document.getElementById("scoreDisplay"),Tt=document.getElementById("foodDisplay"),Mt=document.getElementById("woodDisplay"),Pt=document.getElementById("stoneDisplay"),Bt=document.getElementById("killCounter"),Ct=document.getElementById("gemDisplay"),At=document.getElementById("leaderboardData"),Ot=document.getElementById("nameInput"),Dt=document.getElementById("itemInfoHolder"),Rt=document.getElementById("usernameText"),_t=document.getElementById("ageText"),jt=document.getElementById("ageBarBody"),Lt=document.getElementById("upgradeHolder"),Ut=document.getElementById("upgradeCounter"),Ht=document.getElementById("allianceMenu"),Vt=document.getElementById("allianceHolder"),Ft=document.getElementById("allianceManager"),Nt=document.getElementById("mapDisplay"),zt=document.getElementById("diedText"),Wt=document.getElementById("warningText"),qt=document.getElementById("skinColorHolder"),Yt=Nt.getContext("2d");Nt.width=300,Nt.height=300;var Xt=document.getElementById("storeMenu"),Gt=document.getElementById("storeHolder"),Jt=document.getElementById("notificationDisplay"),Kt=k.hats,Qt=k.accessories,$t=k.avatars,Zt=k.gloves,en=new y(m,Me,d,p);function tn(e){Te=e.teams}var nn=document.getElementById("featuredYoutube"),an=[{name:"NoobGdPro",link:"https://www.youtube.com/@NoobGdPro"},{name:"Infinite Spectral",link:"https://www.youtube.com/@InfiniteSp20-5"},{name:"Base64 Entertainment",link:"https://www.youtube.com/@Base64EntertainmentTeam"},{name:"ilyax",link:"https://www.youtube.com/@ilyax4"},{name:"Dr-Abdo",link:"https://www.youtube.com/@Dr-Abdo123"}],rn=an[d.randInt(0,an.length-1)];nn.innerHTML="<a target='_blank' class='ytLink' href='"+rn.link+"'><i class='material-icons' style='vertical-align: top;'>&#xE064;</i> "+rn.name+"</a>";var on=!0;function sn(e){!1,u.close(),ln(e)}function ln(e){tt.style.display="block",St.style.display="none",wt.style.display="none",zt.style.display="none",xt.style.display="block",d.removeAllChildren(xt),xt.appendChild(document.createTextNode(e));var t=document.createElement("a");t.href="#",t.className="ytLink",t.textContent="reload",t.onclick=function(e){e.preventDefault(),window.location.reload()},xt.appendChild(t)}window.onblur=function(){on=!1},window.onfocus=function(){on=!0,we&&we.alive&&fi()},ft.oncontextmenu=function(){return!1};var cn=function(){var e=["info","youtuber"],t={info:!1,youtuber:!1},n={};function i(e){n[e+"Button"].addEventListener("click",(function(n){n.stopPropagation(),a(e,!t[e])}))}function a(e,i){t[e]=i;var a=n[e+"Panel"];a.classList.toggle("hidden",!i),a.classList.toggle("visible",i),i&&(n[e+"Button"].style.opacity="1")}function r(i){for(var r=0;r<e.length;r++){var o=e[r],s=n[o+"Panel"],l=n[o+"Button"];t[o]&&s&&l&&(s.contains(i.target)||l.contains(i.target)||a(o,!1))}}function o(t){for(var n=0;n<e.length;n++)s(e[n],t)}function s(e,i){var a=n[e+"Button"];if(a)if(t[e])a.style.opacity="1";else{var r=a.getBoundingClientRect(),o=r.left+r.width/2,s=r.top+r.height/2,l=d.getDistance(i.clientX,i.clientY,o,s);a.style.opacity=l>100?"0.3":"1"}}function l(e){var t=document.createElement("a");t.href=e.link,t.target="_blank",t.rel="noopener noreferrer",t.className="menuLink expandedPanelLink",t.setAttribute("role","listitem");var n="http://www.w3.org/2000/svg",i=document.createElementNS(n,"svg");i.setAttribute("class","expandedPanelIcon"),i.setAttribute("viewBox","0 0 24 24"),i.setAttribute("fill","currentColor");var a=document.createElementNS(n,"path");return a.setAttribute("d","M10,16.5V7.5L16,12M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"),i.appendChild(a),t.appendChild(i),t.appendChild(document.createTextNode(e.name)),t}return{init:function(){n.infoButton=document.getElementById("infoPanelToggle"),n.infoPanel=document.getElementById("linksExpandedPanel"),n.youtuberButton=document.getElementById("youtuberPanelToggle"),n.youtuberPanel=document.getElementById("youtuberExpandedPanel"),n.youtuberLinks=document.getElementById("youtuberLinks"),n.versionElement=document.getElementById("versionText"),n.infoButton&&n.infoPanel&&(n.infoPanel.classList.add("hidden"),i("info")),n.youtuberButton&&n.youtuberPanel&&(n.youtuberPanel.classList.add("hidden"),i("youtuber")),(n.youtuberButton||n.infoButton)&&(document.addEventListener("click",r),document.addEventListener("mousemove",o),n.versionElement&&n.versionElement.addEventListener("click",(function(e){e.preventDefault(),window.open("./docs/versions.txt","_blank")})),n.youtuberLinks&&function(){n.youtuberLinks.textContent="";for(var e=document.createDocumentFragment(),t=0;t<an.length;t++)e.appendChild(l(an[t]));n.youtuberLinks.appendChild(e)}())}}}();function hn(e,t,n,i){if(we&&e){if(d.removeAllChildren(Dt),Dt.classList.add("visible"),i){var a="",r={1:"Copper ",2:"Tin ",3:"Gold ",4:"Iron ",5:"Diamond ",6:"Rhodochrosite ",7:"Ruby ",8:"Emerald ",9:"Amethyst ",10:"Uranium ",11:"Crystal ",12:"Draconium "};r[i]&&(a=r[i]),d.generateElement({id:"itemInfoName",text:d.capitalizeFirst(a+e.name),parent:Dt})}else d.generateElement({id:"itemInfoName",text:d.capitalizeFirst(e.name),parent:Dt});if(d.generateElement({id:"itemInfoDesc",text:e.desc,parent:Dt}),n&&e.price)d.generateElement({class:"itemInfoReq",text:"Price: "+e.price+" coins",parent:Dt});else if(t)d.generateElement({class:"itemInfoReq",text:e.type?"secondary":"primary",parent:Dt});else{if(e.req&&e.req.length)for(var o=0;o<e.req.length;o+=2)d.generateElement({class:"itemInfoReq",html:e.req[o]+"<span class='itemInfoReqVal'> x"+e.req[o+1]+"</span>",parent:Dt});e.group&&e.group.limit&&d.generateElement({class:"itemInfoLmt",text:(we.itemCounts[e.group.id]||0)+"/"+e.group.limit,parent:Dt})}}else Dt.classList.remove("visible")}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",cn.init):cn.init();var un,dn,fn,pn=[],mn=[];function gn(e,t){pn.push({sid:e,name:t}),yn()}function yn(){d.removeAllChildren(Jt),pn&&0!==pn.length?(Jt.style.display="block",pn.forEach((function(e,t){var n=d.generateElement({class:"notificationBox",parent:Jt,style:"margin-bottom: 6px;"});d.generateElement({class:"notificationText",text:e.name,parent:n}),d.generateElement({class:"notifButton",html:"<i class='material-icons' style='font-size:28px;color:#cc5151;'>&#xE14C;</i>",parent:n,onclick:function(){Sn(0)},hookTouch:!0}),d.generateElement({class:"notifButton",html:"<i class='material-icons' style='font-size:28px;color:#8ecc51;'>&#xE876;</i>",parent:n,onclick:function(){Sn(1)},hookTouch:!0})}))):Jt.style.display="none"}function vn(e){Te.push(e),"block"==Ht.style.display&&xn()}function kn(e,t){we&&(we.team=e,we.isOwner=t,"block"==Ht.style.display&&xn())}function wn(e){mn=e,"block"==Ht.style.display&&xn()}function bn(e){for(var t=Te.length-1;t>=0;t--)Te[t].sid==e&&Te.splice(t,1);"block"==Ht.style.display&&xn()}function xn(){if(we&&we.alive){if($n(),Xt.style.display="none",Ht.style.display="block",d.removeAllChildren(Vt),we.team)for(var e=0;e<mn.length;e+=2)!function(e){var t=d.generateElement({class:"allianceItem",style:"color:"+(mn[e]==we.sid?"#fff":"rgba(255,255,255,0.6)"),text:mn[e+1],parent:Vt});we.isOwner&&mn[e]!=we.sid&&d.generateElement({class:"joinAlBtn",text:"Kick",onclick:function(){En(mn[e])},hookTouch:!0,parent:t})}(e);else if(Te.length)for(e=0;e<Te.length;++e)!function(e){var t=d.generateElement({class:"allianceItem",style:"color:"+(Te[e].sid==we.team?"#fff":"rgba(255,255,255,0.6)"),text:Te[e].sid,parent:Vt});d.generateElement({class:"joinAlBtn",text:"Join",onclick:function(){In(e)},hookTouch:!0,parent:t})}(e);else d.generateElement({class:"allianceItem",text:"No Clans Yet",parent:Vt});d.removeAllChildren(Ft),we.team?d.generateElement({class:"allianceButtonM",style:"width: 360px",text:we.isOwner?"Delete Clan":"Leave Clan",onclick:function(){Mn()},hookTouch:!0,parent:Ft}):(d.generateElement({tag:"input",type:"text",id:"allianceInput",maxLength:7,placeholder:"unique name",ontouchstart:function(e){e.preventDefault();var t=prompt("unique name",e.currentTarget.value);e.currentTarget.value=t.slice(0,7)},parent:Ft}),d.generateElement({tag:"div",class:"allianceButtonM",style:"width: 140px;",text:"Create Clan",onclick:function(){Tn()},hookTouch:!0,parent:Ft}))}}function Sn(e){u.send("P",pn[0].sid,e),pn.splice(0,1),yn()}function En(e){u.send("P",e)}function In(e){u.send("b",Te[e].sid)}function Tn(){u.send("L",document.getElementById("allianceInput").value)}function Mn(){pn=[],yn(),u.send("N")}var Pn,Bn=[];// Fixed a missing semicolon here
var Cn=o((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init=function(e,t){this.scale=0,this.x=e,this.y=t,this.active=!0},this.update=function(e,t){this.active&&(this.scale+=.05*t,this.scale>=p.mapPingScale?this.active=!1:(e.globalAlpha=1-Math.max(0,this.scale/p.mapPingScale),e.beginPath(),e.arc(this.x/p.mapScale*Nt.width,this.y/p.mapScale*Nt.width,this.scale,0,2*Math.PI),e.stroke()))}}));new Cn;function An(e,t){for(var n=0;n<Bn.length;++n)if(!Bn[n].active){Pn=Bn[n];break}Pn||(Pn=new Cn,Bn.push(Pn)),Pn.init(e,t)}function On(e){dn=e}var Dn=0;function Rn(e,t,n){n?e?we.tailIndex=t:we.tails[t]=1:e?we.skinIndex=t:we.skins[t]=1,"block"==Xt.style.display&&jn()}function _n(){if(Xt)for(var e=Xt.querySelectorAll(".overlay-tab"),t=0;t<e.length;t++)t===Dn?e[t].classList.add("active"):e[t].classList.remove("active")}function jn(){if(we){d.removeAllChildren(Gt);var e=Dn,t=Kt,n="hats/hat_";1==e?(t=Qt,n="accessories/access_"):2==e?(t=$t,n="avatars/avatar_"):3==e&&(t=Zt,n="gloves/glove_");for(var i=0;i<t.length;++i)t[i].dontSell||function(i){var a=d.generateElement({id:"storeDisplay"+i,class:"storeItem",onmouseout:function(){hn()},onmouseover:function(){hn(t[i],!1,!0)},parent:Gt});d.hookTouchEvents(a,!0),d.generateElement({tag:"img",class:"hatPreview",src:"../img/"+n+t[i].id+"_ico.png",parent:a}),d.generateElement({tag:"span",text:t[i].name,parent:a}),(e?we.tails[t[i].id]:we.skins[t[i].id])?(e?we.tailIndex:we.skinIndex)==t[i].id?d.generateElement({class:"joinAlBtn",style:"margin-top: 5px",text:"Unequip",onclick:function(){Ln(0,e)},hookTouch:!0,parent:a}):d.generateElement({class:"joinAlBtn",style:"margin-top: 5px",text:"Equip",onclick:function(){Ln(t[i].id,e)},hookTouch:!0,parent:a}):(d.generateElement({class:"joinAlBtn",style:"margin-top: 5px",text:"Buy",onclick:function(){Un(t[i].id,e)},hookTouch:!0,parent:a}),d.generateElement({tag:"span",class:"itemPrice",text:0==t[i].price?"FREE":t[i].price,parent:a}))}(i)}}function Ln(e,t){u.send("c",0,e,t)}function Un(e,t){u.send("c",1,e,t)}function Hn(){Xt.style.display="none",Ht.style.display="none",$n()}var Vn={};function Fn(e,t){e&&(t?we.weapons=e:we.items=e);for(var n=0;n<g.list.length;++n){var i=g.weapons.length+n;document.getElementById("actionBarItem"+i).style.display=we.items.indexOf(g.list[n].id)>=0?"inline-block":"none"}for(n=0;n<g.weapons.length;++n)document.getElementById("actionBarItem"+n).style.display=we.weapons[g.weapons[n].type]==g.weapons[n].id?"inline-block":"none"}function Nn(e){ue=e,xe=e&&window.devicePixelRatio||1,mt.checked=e,ce("native_resolution",e.toString()),ti()}function zn(){for(var e="",t=0;t<p.skinColors.length;++t)e+=t==Qe?"<div class='skinColorItem activeSkin' style='background-color:"+p.skinColors[t]+"' onclick='selectSkinColor("+t+")'> </div>":"<div class='skinColorItem' style='background-color:"+p.skinColors[t]+"' onclick='selectSkinColor("+t+")'> </div>";qt.innerHTML=e}function Wn(e){Qe=e,zn()}var qn,Yn,Xn=document.getElementById("chatBox"),Gn=document.getElementById("chatHolder"),Jn=new S;function Kn(){qn?setTimeout((function(){var e=prompt("chat message");e&&Qn(e)}),1):"block"==Gn.style.display?(Xn.value&&Qn(Xn.value),$n()):(Xt.style.display="none",Ht.style.display="none",Gn.style.display="block",Xn.focus(),fi()),Xn.value=""}function Qn(e){u.send("6",e.slice(0,30))}function $n(){Xn.value="",Gn.style.display="none"}function Zn(e){if(!e)return"";for(var t="M",n=1;n<e;n++)t+="o";return t}function ei(e,t){var n=cr(e);if(n){n.chatMessage=function(e){for(var t=e,n=0;n<Jn.list.length;++n){var i=Jn.list[n];if(i){var a=Zn(i.length),r=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),o=new RegExp(r,"gi");t=t.replace(o,a)}}return t}(t),n.chatCountdown=p.chatCountdown;for(var i=n.chatMessage.toLowerCase().split(" "),a=0;a<w.stickers.length;a++)if(w.stickers[a].words.some((function(e){return i.includes(e)})))return void(n.chatSticker=w.stickers[a].name);n.chatSticker=null}}function ti(){ze=window.innerWidth,We=window.innerHeight;var e=Math.max(ze/$e,We/Ze)*xe;ft.width=ze*xe,ft.height=We*xe,ft.style.width=ze+"px",ft.style.height=We+"px",pt.setTransform(e,0,0,e,(ze*xe-$e*e)/2,(We*xe-Ze*e)/2)}function ni(e){(qn=e)?bt.classList.add("touch"):bt.classList.remove("touch")}function ii(e){e.preventDefault(),e.stopPropagation(),ni(!0);for(var t=0;t<e.changedTouches.length;t++){var n=e.changedTouches[t];n.identifier==Je.id?(Je.id=-1,yi()):n.identifier==Ke.id&&(Ke.id=-1,we.buildIndex>=0&&(ke=1,mi()),ke=0,mi())}}function ai(){return we?(-1!=Ke.id?Yn=Math.atan2(Ke.currentY-Ke.startY,Ke.currentX-Ke.startX):we.lockDir||qn||(Yn=Math.atan2(Ge-We/2,Xe-ze/2)),d.fixTo(Yn||0,2)):0}window.addEventListener("resize",d.checkTrusted(ti)),ti(),ni(!1),window.setUsingTouch=ni,ft.addEventListener("touchmove",d.checkTrusted((function(e){e.preventDefault(),e.stopPropagation(),ni(!0);for(var t=0;t<e.changedTouches.length;t++){var n=e.changedTouches[t];n.identifier==Je.id?(Je.currentX=n.pageX,Je.currentY=n.pageY,yi()):n.identifier==Ke.id&&(Ke.currentX=n.pageX,Ke.currentY=n.pageY,ke=1)}})),!1),ft.addEventListener("touchstart",d.checkTrusted((function(e){e.preventDefault(),e.stopPropagation(),ni(!0);for(var t=0;t<e.changedTouches.length;t++){var n=e.changedTouches[t];n.pageX<document.body.scrollWidth/2&&-1==Je.id?(Je.id=n.identifier,Je.startX=Je.currentX=n.pageX,Je.startY=Je.currentY=n.pageY,yi()):n.pageX>document.body.scrollWidth/2&&-1==Ke.id&&(Ke.id=n.identifier,Ke.startX=Ke.currentX=n.pageX,Ke.startY=Ke.currentY=n.pageY,we.buildIndex<0&&(ke=1,mi()))}})),!1),ft.addEventListener("touchend",d.checkTrusted(ii),!1),ft.addEventListener("touchcancel",d.checkTrusted(ii),!1),ft.addEventListener("touchleave",d.checkTrusted(ii),!1),ft.addEventListener("mousemove",(function(e){e.preventDefault(),e.stopPropagation(),ni(!1),Xe=e.clientX,Ge=e.clientY,Dt.classList.contains("visible")&&hn();Zi&&"none"!==Zi.style.display&&(Zi.style.display="none")}),!1),ft.addEventListener("mousedown",(function(e){if(ni(!1),Oe&&we){var t=we.x-ze/2,n=we.y-We/2,i=Math.round(t+e.clientX),a=Math.round(n+e.clientY);return void u.send("TP",i,a)}ke=1,mi()}),!1),ft.addEventListener("mouseup",(function(e){ni(!1),ke=0,mi()}),!1);var ri={},oi={moveUp:87,moveDown:83,moveLeft:65,moveRight:68,autoAttack:69,quickFood:81,lockRotation:88,pingMinimap:82,closeWindows:27,quickWindmill:78,quickSpike:86,quickTrap:70,quickTurret:72},si={};function li(e){var t={8:"BKSP",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",20:"CAPS",27:"ESC",32:"SPACE",33:"PGUP",34:"PGDN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",46:"DEL",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"};return t[e]?t[e]:e>=112&&e<=123?"F"+(e-111):e>=96&&e<=105?"NUM"+(e-96):String.fromCharCode(e)}!function(){var e=he("moo_keybinds");if(e)try{var t=JSON.parse(e);for(var n in oi)si[n]=void 0!==t[n]?t[n]:oi[n]}catch(e){for(var n in oi)si[n]=oi[n]}else for(var n in oi)si[n]=oi[n]}();var ci={};function hi(){(ci={})[si.moveUp]=[0,-1],ci[38]=[0,-1],ci[si.moveDown]=[0,1],ci[40]=[0,1],ci[si.moveLeft]=[-1,0],ci[37]=[-1,0],ci[si.moveRight]=[1,0],ci[39]=[1,0]}function ui(){var e=[32,13],t={};for(var n in si){t[o=si[n]]||(t[o]=[]),t[o].push(n)}for(var i=0;i<e.length;i++){var a=e[i];t[a]||(t[a]=[]),t[a].push("__fixed_"+a)}var r={};for(var o in t)t[o].length>1&&(r[o]=!0);var s=document.querySelectorAll(".keybindKey[data-action]");for(i=0;i<s.length;i++){var l=s[i].getAttribute("data-action");void 0!==si[l]&&r[si[l]]?s[i].classList.add("conflict"):s[i].classList.remove("conflict")}var c=document.querySelectorAll(".keybindText[data-fixed-key]");for(i=0;i<c.length;i++){var h=parseInt(c[i].getAttribute("data-fixed-key"));h&&r[h]?c[i].classList.add("conflict"):c[i].classList.remove("conflict")}
}function di(){for(var e=document.querySelectorAll(".keybindKey[data-action]"),t=0;t<e.length;t++)!function(e){var t=e.getAttribute("data-action");e.textContent=li(si[t]),e.addEventListener("click",(function(n){n.stopPropagation(),e.classList.contains("listening")||(e.classList.add("listening"),e.textContent="...",window.addEventListener("keydown",(function n(i){i.preventDefault(),i.stopPropagation();var a=i.which||i.keyCode||0;si[t]=a,ce("moo_keybinds",JSON.stringify(si)),e.classList.remove("listening"),e.textContent=li(a),hi(),ui(),window.removeEventListener("keydown",n,!0)}),!0))}))}(e[t]);ui()}function fi(){ri={},u.send("e")}function pi(){return"block"!=Gn.style.display}function mi(){we&&we.alive&&(1===ke&&function(){var e=Date.now();Ir.push(e),Cr(e),Mr=!0,Ar()}(),u.send("F",ke,ai()))}hi(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",di):di(),window.addEventListener("keydown",(function(e){if("Space"===e.code||32===e.keyCode||32===e.which){var t=document.activeElement;["TEXTAREA","INPUT"].includes(t.tagName)||e.preventDefault()}}),!0),window.addEventListener("keydown",d.checkTrusted((function(e){var t=e.which||e.keyCode||0;if(t==si.closeWindows)Hn();else if(we&&we.alive&&pi()&&!ri[t])if(ri[t]=1,t==si.autoAttack)u.send("K",1);else if(67==t)fn||(fn={}),fn.x=we.x,fn.y=we.y;else if(t==si.lockRotation)we.lockDir=we.lockDir?0:1,u.send("K",0);else if(null!=we.weapons[t-49])ki(we.weapons[t-49],!0);else if(null!=we.items[t-49-we.weapons.length])ki(we.items[t-49-we.weapons.length]);else if(t==si.quickFood)ki(we.items[0]);else if(t==si.quickWindmill)ki(we.items[3]);else if(t==si.quickSpike)ki(we.items[2]);else if(t==si.quickTrap)ki(we.items[4]);else if(t==si.quickTurret){for(var n,i=[7,8,9,12,13],a=0;a<we.items.length;a++){var r=g.list[we.items[a]];if(r&&r.group&&-1!==i.indexOf(r.group.id)){n=we.items[a];break}}void 0!==n&&ki(n)}else t==si.pingMinimap?vi():ci[t]?yi():32==t&&(ke=1,mi(),Cr())}))),window.addEventListener("keyup",d.checkTrusted((function(e){if(we&&we.alive){var t=e.which||e.keyCode||0;13==t?Kn():pi()&&ri[t]&&(ri[t]=0,ci[t]?yi():32==t&&(ke=0,mi()))}})));var gi=void 0;function yi(){var e=function(){var e=0,t=0;if(-1!=Je.id)e+=Je.currentX-Je.startX,t+=Je.currentY-Je.startY;else for(var n in ci){var i=ci[n];e+=!!ri[n]*i[0],t+=!!ri[n]*i[1]}return 0==e&&0==t?void 0:d.fixTo(Math.atan2(t,e),2)}();(null==gi||null==e||Math.abs(e-gi)>.3)&&(u.send("9",e),gi=e)}function vi(){u.send("S",1)}function ki(e,t){if(!t&&void 0!==e&&we&&we.items){var n=g.list[e];n&&n.group&&0!==n.group.id&&e}u.send("z",e,t)}var wi=document.getElementById("accountSection");var bi=!0;function xi(e){xt.style.display="none",wt.style.display="inline-block",tt.style.display="none",ri={},e,ke=0,et=!0,bi&&(bi=!1,Me.length=0)}function Si(e,t,n,i){E.showText(e,t,50,.18,500,Math.abs(n),n>=0?"#fff":"#8ecc51")}function Ei(e,t,n){E.showText(e,t,50,.18,500,Math.abs(n),"#8ecc51")}function Ii(e,t,n){try{E.showText(t,n,60,.2,800,"SMITED","#00bfff"),Ce.push({x:t,y:n,startTime:Date.now(),duration:600,scale:150})}catch(e){console.error("Error in handleSmite:",e)}}function Ti(e){try{var t=cr(e);t&&Ae.push({sid:e,x:t.x,y:t.y,startTime:Date.now(),duration:400})}catch(e){console.error("Error in handleSuperHammer:",e)}}function Mi(e){try{De=e||"You have been kicked",ce("moo_kicked",JSON.stringify({message:De,timestamp:Date.now()}));var t=document.createElement("div");t.id="kickOverlay",t.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.85);z-index:9999;display:flex;align-items:center;justify-content:center;flex-direction:column;";var n=document.createElement("div");n.style.cssText='color:#ff4444;font-size:48px;font-family:"Hammersmith One",sans-serif;text-align:center;margin-bottom:20px;',n.textContent="YOU HAVE BEEN KICKED",t.appendChild(n);var i=document.createElement("div");i.style.cssText='color:#ffffff;font-size:28px;font-family:"Hammersmith One",sans-serif;text-align:center;margin-bottom:30px;',i.textContent=De,t.appendChild(i);var a=document.createElement("div");a.style.cssText='background:#4CAF50;color:white;padding:15px 40px;border-radius:8px;font-size:20px;font-family:"Hammersmith One",sans-serif;cursor:pointer;margin-top:20px;',a.textContent="Reload",a.onclick=function(){deleteVal("moo_kicked"),window.location.reload()},t.appendChild(a),document.body.appendChild(t),setTimeout((function(){sn("Kicked")}),500)}catch(e){console.error("Error in handleKicked:",e)}}function Pi(e,t){try{Re=Date.now()+1e3*e,e,ce("moo_banned",JSON.stringify({message:t||"Banned by admin",endTime:Re,timestamp:Date.now()}));var n=document.createElement("div");n.id="banOverlay",n.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);z-index:9999;display:flex;align-items:center;justify-content:center;flex-direction:column;";var i=document.createElement("div");i.style.cssText='color:#ff0000;font-size:56px;font-family:"Hammersmith One",sans-serif;text-align:center;margin-bottom:20px;',i.textContent="YOU HAVE BEEN BANNED",n.appendChild(i);var a=document.createElement("div");a.style.cssText='color:#ffffff;font-size:28px;font-family:"Hammersmith One",sans-serif;text-align:center;margin-bottom:30px;',a.textContent=t||"Banned by admin",n.appendChild(a);var r=document.createElement("div");r.id="banCountdown",r.style.cssText='color:#ffcc00;font-size:72px;font-family:"Hammersmith One",sans-serif;',r.textContent=e,n.appendChild(r);var o=document.createElement("div");o.style.cssText='color:#888888;font-size:20px;font-family:"Hammersmith One",sans-serif;margin-top:10px;',o.textContent="seconds until disconnect",n.appendChild(o);var s=document.createElement("div");s.style.cssText='background:#4CAF50;color:white;padding:15px 40px;border-radius:8px;font-size:20px;font-family:"Hammersmith One",sans-serif;cursor:pointer;margin-top:30px;',s.textContent="Reload",s.onclick=function(){window.location.reload()},n.appendChild(s),document.body.appendChild(n);var l=setInterval((function(){var e=Math.ceil((Re-Date.now())/1e3),t=document.getElementById("banCountdown");t&&(t.textContent=Math.max(0,e)),e<=0&&(clearInterval(l),deleteVal("moo_banned"),sn("Banned"))}),100)}catch(e){console.error("Error in handleBanned:",e)}}function Bi(e){try{Oe=!!e}catch(e){console.error("Error in handleTeleportClick:",e)}}function Ci(e,t){try{t?e:null,!!t?E.showText(we.x,we.y-50,50,.15,600,"MOB MODE: "+e,"#ff9900"):E.showText(we.x,we.y-50,50,.15,600,"MOB MODE OFF","#ffffff")}catch(e){console.error("Error in handleMobMode:",e)}}function Ai(e,t){E.showText(e,t,50,.18,500,"INVINCIBLE","#fff")}function Oi(e,t){var n=cr(e);n&&(n.isInvincible=!!t)}function Di(e){try{if(console.log("Admin Login - Players received:",e),!Array.isArray(e))return void console.error("Player list is not an array:",e);console.log("Server has ".concat(e.length," player(s):")),e.forEach((function(e){var t=e.health?"".concat(e.health,"/").concat(e.maxHealth):"Dead";console.log("  ID: ".concat(e.sid," | ").concat(e.name," | Health: ").concat(t))}))}catch(e){console.error("Error in adminLoginShowPlayers:",e)}}var Ri=0,_i=[],ji=!1,Li=0;function Ui(e){try{if(e&&"disable"===e.action)return Ri=0,_i=[],ji=!1,Li=0,void console.log("Player IDs display disabled");if(!Array.isArray(e.players)&&!Array.isArray(e))return void console.error("Player list is not an array:",e);var t=Array.isArray(e.players)?e.players:e;_i=t,Li=Date.now(),e&&"toggle"===e.action?(Ri=1/0,ji=!0,console.log("Showing player IDs permanently (toggle mode):",t)):(Ri=1e4,ji=!1,console.log("Showing player IDs for 10 seconds:",t))}catch(e){console.error("Error in showIDsOnScreen:",e)}}var Hi=99999,Vi=99999;function Fi(){try{et=!1,ie++,ae&&(re+=Date.now()-ae,ae=null);try{factorem.refreshAds([2],!0)}catch(e){}St&&(St.style.display="none");try{Hn()}catch(e){}un={x:we&&we.x?we.x:0,y:we&&we.y?we.y:0},xt&&(xt.style.display="none"),zt&&(zt.style.display="block",zt.style.fontSize="0px"),Hi=0,setTimeout((function(){wt&&(wt.style.display="inline-block"),tt&&(tt.style.display="block"),zt&&(zt.style.display="none")}),p.deathFadeout||3e3);for(var e=0;e<g.weapons.length;e++)Vn[e](0);try{updateServerList()}catch(e){}}catch(e){console.error("Error in killPlayer:",e)}}var Ni=null;function zi(e,t,n){try{E.showText(t,n,50,.15,400,"BOOM!","#ff6b35"),Be.push({x:t,y:n,startTime:Date.now(),duration:600,scale:100})}catch(e){console.error("Error in explosionEffect:",e)}}function Wi(e){we&&en.removeAllItems(e)}function qi(e){en.disableBySid(e)}function Yi(){It.innerText=we.points,Tt.innerText=we.food,Mt.innerText=we.wood,Pt.innerText=we.stone,Bt.innerText=we.kills,Ct.innerText=we.gems+"",function(){if(we&&P){var e=document.getElementById("accountScore");e&&(e.textContent=_(we.points||0));var t=document.getElementById("accountKills");t&&(t.textContent=_(we.kills||0));var n=document.getElementById("accountDeaths");if(n){var i=(P.deaths||0)+ie;n.textContent=_(i)}var a=document.getElementById("accountHighScore");if(a){var r=we.points||0,o=P.highestScore||0,s=Math.max(r,o);a.textContent=_(s)}var l=document.getElementById("accountPlayTime");if(l){var c=ae?Date.now()-ae:0,h=(P.playTime||0)+re+c;l.textContent=j(h)}}}()}Ni||((Ni=new Image).onload=function(){this.isLoaded=!0},Ni.src="../img/effects/explosion.jpg");var Xi={},Gi=["crown","skull","shield"];var Ji=[];function Ki(e,t){if(we.upgradePoints=e,we.upgrAge=t,e>0){Ji.length=0,d.removeAllChildren(Lt);for(var n=0;n<g.weapons.length;++n){if(g.weapons[n].age==t&&(null==g.weapons[n].pre||we.weapons.indexOf(g.weapons[n].pre)>=0))d.generateElement({id:"upgradeItem"+n,class:"actionBarItem",onmouseout:function(){hn()},parent:Lt}).style.backgroundImage=document.getElementById("actionBarItem"+n).style.backgroundImage,Ji.push(n)}for(n=0;n<g.list.length;++n)if(g.list[n].age==t&&(null==g.list[n].pre||we.items.indexOf(g.list[n].pre)>=0)){var i=g.weapons.length+n;d.generateElement({id:"upgradeItem"+i,class:"actionBarItem",onmouseout:function(){hn()},parent:Lt}).style.backgroundImage=document.getElementById("actionBarItem"+i).style.backgroundImage,Ji.push(i)}for(n=0;n<Ji.length;n++)!function(e){var t=document.getElementById("upgradeItem"+e);t.onmouseover=function(){g.weapons[e]?hn(g.weapons[e],!0):hn(g.list[e-g.weapons.length])},t.onclick=d.checkTrusted((function(){u.send("H",e)})),d.hookTouchEvents(t)}(Ji[n]);Ji.length?(Lt.style.display="block",Ut.style.display="block",Ut.innerHTML='<svg viewBox="0 0 500 15"><text class="svgText" x="50%" y="50%" style="text-anchor: middle;alignment-baseline: middle;font-size: 10px;stroke: #494947;stroke-width: 2.5px;stroke-linejoin: round;paint-order: stroke;fill: white;">Select Upgrade Items ('+e+")</text></svg>"):(Lt.style.display="none",Ut.style.display="none",hn())}else Lt.style.display="none",Ut.style.display="none",hn()}function Qi(e,t,n){null!=e&&(we.XP=e),null!=t&&(we.maxXP=t),null!=n&&(we.age=n),n==p.maxAge?(_t.innerHTML='<svg viewBox="0 0 500 500"><text class="svgText" x="50%" y="95%" style="text-anchor: middle;alignment-baseline: middle;font-size: 28px;stroke: #494947;stroke-width: 10px;stroke-linejoin: round;paint-order: stroke;fill: white;">Max Level</text></svg>',jt.style.width="100%"):(_t.innerHTML='<svg viewBox="0 0 500 500"><text class="svgText" x="50%" y="95%" style="text-anchor: middle;alignment-baseline: middle;font-size: 28px;stroke: #494947;stroke-width: 10px;stroke-linejoin: round;paint-order: stroke;fill: white;">Level '+we.age+"</text></svg>",jt.style.width=we.XP/we.maxXP*100+"%"),Rt.innerHTML='<svg viewBox="0 0 500 200"><text class="svgText" x="50%" y="80%" style="text-anchor: middle;alignment-baseline: middle;font-size: 60px;stroke: #494947;stroke-width: 12px;stroke-linejoin: round;paint-order: stroke;fill: white;">'+we.name+"</text></svg>"}function $i(e,t,n,i,a){var r=p.playerScale,o=g.weapons[t]||g.weapons[0],s=Math.PI/4*(o.armS||1),l=o.hndS||1,c=o.hndD||1,h=r*Math.cos(s),u=r*Math.sin(s),d=r*c*Math.cos(-s*l),f=r*c*Math.sin(-s*l),m=r+o.xOff-o.length/2,y=r+o.xOff+o.length/2,v=o.yOff-o.width/2,k=o.yOff+o.width/2,w=0,b=null;if(i>0){for(var x=0;x<Kt.length;x++)if(Kt[x].id==i){b=Kt[x];break}b?(Ma[i]=b,w=b.scale/2):w=60}var S=Math.max(y,h+14,d+14,r,w)+5.5,E=Math.min(m,h-14,d-14,-r,-w)-5.5,I=Math.max(k,u+14,f+14,r,w)+5.5,T=S-E,M=45/(I-(Math.min(v,u-14,f-14,-r,-w)-5.5)),P=Math.ceil(T*M),B=P+E*M,C=I*M,A=document.createElement("canvas");A.width=P,A.height=45;var O=A.getContext("2d");O.translate(B,C),O.scale(M,M),O.rotate(Math.PI),O.strokeStyle="#494947",O.lineWidth=5.5,O.lineJoin="miter";var D=(p.weaponVariants[n]||p.weaponVariants[0]).src||"",R=o.src+D,_;if(_=Aa[R]||((_=new Image).onload=function(){this.isLoaded=!0},_.src=".././img/weapons/"+R+".png",Aa[R]=_),!o.aboveHand&&_.isLoaded&&O.drawImage(_,r+o.xOff-o.length/2,o.yOff-o.width/2,o.length,o.width),O.fillStyle=p.skinColors[e]||p.skinColors[0],O.beginPath(),O.arc(h,u,14,0,2*Math.PI),O.fill(),O.stroke(),O.beginPath(),O.arc(d,f,14,0,2*Math.PI),O.fill(),O.stroke(),o.aboveHand&&_.isLoaded&&O.drawImage(_,r+o.xOff-o.length/2,o.yOff-o.width/2,o.length,o.width),O.beginPath(),O.arc(0,0,r,0,2*Math.PI),O.fill(),O.stroke(),i>0){O.rotate(Math.PI/2);var j=Ta[i];j||((j=new Image).onload=function(){this.isLoaded=!0,j.onload=null},j.src=".././img/hats/hat_"+i+".png",Ta[i]=j),j.isLoaded&&b&&O.drawImage(j,-b.scale/2,-b.scale/2,b.scale,b.scale)}return A}var Zi=document.getElementById("leaderPreview"),ea=document.getElementById("leaderPreviewCanvas"),ta=ea?ea.getContext("2d"):null;function na(e,t,n,i,a){if(ta){var r=ta,o=ea.width,s=ea.height;r.clearRect(0,0,o,s),r.save(),r.translate(o/2,s/2),r.scale(.6,.6);var l=p.playerScale,c=g.weapons[t]||g.weapons[0],h=Math.PI/4*(c.armS||1),u=c.hndS||1,d=c.hndD||1,f=(p.weaponVariants[n]||p.weaponVariants[0]).src||"";if(r.strokeStyle="#494947",r.lineWidth=5.5,r.lineJoin="miter",a>0){var m=Ba[a];m||((m=new Image).onload=function(){this.isLoaded=!0,this.onload=null},m.src=".././img/accessories/access_"+a+".png",Ba[a]=m);var y=Ca[a];if(!y){for(var v=0;v<Qt.length;v++)if(Qt[v].id==a){y=Qt[v];break}Ca[a]=y}m.isLoaded&&y&&(r.save(),r.translate(-20-(y.xOff||0),0),r.drawImage(m,-y.scale/2,-y.scale/2,y.scale,y.scale),r.restore())}c.aboveHand||(Oa(c,f,l,0,r),null==c.projectile||c.hideProjectile||ma(l,0,g.projectiles[c.projectile],f,r)),r.fillStyle=p.skinColors[e]||p.skinColors[0],Fa(l*Math.cos(h),l*Math.sin(h),14,r),Fa(l*d*Math.cos(-h*u),l*d*Math.sin(-h*u),14,r),c.aboveHand&&(Oa(c,f,l,0,r),null==c.projectile||c.hideProjectile||ma(l,0,g.projectiles[c.projectile],f,r)),Fa(0,0,l,r),i>0&&(r.rotate(Math.PI/2),Pa(i,r,null,{skinRot:0})),r.restore()}}function ia(e){e,Zi&&(Zi.style.display="none"),d.removeAllChildren(At);for(var t=e[2],n=0;n<e.length;n+=8)!function(n){var i=e[n],a=e[n+2],r=e[n+3],o=e[n+4],s=e[n+5],l=e[n+6],c=e[n+7],h=0==t?100:a/t*100,u=document.createElement("div");u.className="leaderEntry",At.appendChild(u);var f=$i(l,r,o,s,c);f.className="leaderPlayerIcon",u.appendChild(f);var p=document.createElement("div");p.className="leaderHolder",u.appendChild(p);var m=document.createElement("div");m.className="leaderProgressBar",m.style.backgroundColor=i?"#8ECC51":"#CC5151",m.style.width="".concat(h,"%"),p.appendChild(m);var g=document.createElement("div");g.className="leaderboardItem",g.innerHTML='\n            <svg viewBox="0 0 212 20" style="position: absolute;top: 10%;">\n              <text class="svgText" x="50%" y="50%" style="text-anchor: middle;alignment-baseline: middle;font-size: 15px;stroke: #494947;stroke-width: 5px;stroke-linejoin: round;paint-order: stroke;fill: white;">'.concat(e[n+1]," - ").concat(d.kFormat(a)||"0","</text>\n            </svg>"),p.appendChild(g),pe&&(f.style.display="none",u.addEventListener("mouseenter",(function(){na(l,r,o,s,c),Zi.style.display="block";var e=u.getBoundingClientRect(),t=Zi.parentElement.getBoundingClientRect();Zi.style.top=e.top-t.top+e.height/2-ea.height/2+"px"})),u.addEventListener("mouseleave",(function(){Zi.style.display="none"})))}(n)}var aa=function(e){var t=e.x,n=e.y,i=e.scale;return Math.abs(t-we.x)-i<=$e/2*1.3&&Math.abs(n-we.y)-i<=Ze/2*1.3};function ra(e,t,n,a,r){var o=this;this.startX=e,this.startY=t,this.distance=a,this.float=r,this.amountPaths=Math.ceil(n/a),this.path=new Map,this.generate=function(){for(var n=1;n<=o.amountPaths;n++){var i=n%2?0:a,s=Math.floor(35*Math.random())+10,l=e+a*(n-1),c=t+("down"===r?i:-i)+(n%2?0:Math.random()<.55?s:-s);o.path.set(n,[l,c,i,s])}},this.render=function(e,n,r){var s,l;if(null!==(s=we)&&void 0!==s&&s.active&&null!==(l=we)&&void 0!==l&&l.alive)for(var c=i(o.path.values()),h=a/2,u=1;u<c.length;u++){var d=c[u-1],f=c[u];if(aa({x:d[0],y:d[1],scale:10})&&aa({x:f[0],y:f[1],scale:10})){var p=[d[0]-h/2,d[1]+(d[2]?-h:h)],m=[f[0]+1.15*h,f[1]+1.2*h],g=[f[0]+1.35*h,f[1]-1.15*h];pt.save(),pt.fillStyle=e,pt.lineCap=pt.lineJoin="round",pt.beginPath(),pt.moveTo(d[0]-n,d[1]-r),pt.lineTo(d[0]+2*a-n,t-r),pt.lineTo(f[0]-n,f[1]-r),pt.fill(),pt.beginPath(),pt.moveTo(d[0]-n,d[1]-r),pt.bezierCurveTo(p[0]-n,p[1]-r,m[0]-n,m[1]-r,f[0]+(f[3]>=10?3.5:1)-n,f[1]-r),pt.fill(),pt.beginPath(),pt.moveTo(f[0]-n,f[1]-r),pt.bezierCurveTo(m[0]-n,m[1]-r,g[0]-n,g[1]-r,f[0]+2*a-n,t-r),pt.fill(),pt.restore()}}},this.generate()}var oa=new ra(-$e,p.snowBiomeTop-1,p.mapScale+2*$e,20,"down"),sa=new ra(-$e,p.mapScale-p.snowBiomeTop+1,p.mapScale+2*$e,20,"up"),la={};var ca=0,ha=0;function ua(){ji&&we&&(!Li||ye-Li>=1e3)&&u.send("6","/id toggle"),we&&(!ve||ye-ve>=1e3/p.clientSendRate)&&(ve=ye,u.send("D",ai())),Hi<120&&(Hi+=.1*ge,zt.style.fontSize=Math.min(Math.round(Hi),120)+"px"),Vi<120&&(Vi+=.1*ge,Wt.style.fontSize=Math.min(Math.round(Vi),120)+"px");var e=.7*Date.now();ca=30*Math.sin(e/1e3);var t=.5*Date.now();if(ha=30*Math.cos(t/1e3),we){var n=d.getDistance(Ve,Fe,we.x,we.y),i=d.getDirection(we.x,we.y,Ve,Fe),a=Math.min(.01*n*ge,n);n>.05?(Ve+=a*Math.cos(i),Fe+=a*Math.sin(i)):(Ve=we.x,Fe=we.y)}else Ve=p.mapScale/2+ca,Fe=p.mapScale/2+ha;for(var r=ye-1e3/p.serverUpdateRate,o=0;o<Ie.length+Ee.length;++o)if((be=Ie[o]||Ee[o-Ie.length])&&be.visible)if(be.forcePos)be.x=be.x2,be.y=be.y2,be.dir=be.d2;else{var s=be.t2-be.t1,l=(r-be.t1)/s;be.dt+=ge;var c=Math.min(1.7,be.dt/170),h=be.x2-be.x1;be.x=be.x1+h*c,h=be.y2-be.y1,be.y=be.y1+h*c,be.dir=Math.lerpAngle(be.d2,be.d1,Math.min(1.2,l))}var f=Ve-$e/2,m=Fe-Ze/2;!function(e,t,n){for(var i in He)Object.prototype.hasOwnProperty.call(He,i)&&(He[i].length=0);for(var a=0;a<Me.length;++a)if((be=Me[a])&&be.active){var r=be.layer;if(void 0!==r){He[r]||(He[r]=[]),be.update(n);var o=be.x+be.xWiggle-e,s=be.y+be.yWiggle-t;tr(o,s,be.scale+(be.blocker||0))&&He[r].push({obj:be,x:o,y:s})}}}(f,m,ge),p.snowBiomeTop-m<=0&&p.mapScale-p.snowBiomeTop-m>=Ze?(pt.fillStyle="#b6db66",pt.fillRect(0,0,$e,Ze)):p.mapScale-p.snowBiomeTop-m<=0?(pt.fillStyle="#dbc666",pt.fillRect(0,0,$e,Ze)):p.snowBiomeTop-m>=Ze?(pt.fillStyle="#E9FBFF",pt.fillRect(0,0,$e,Ze)):p.snowBiomeTop-m>=0?(pt.fillStyle="#E9FBFF",pt.fillRect(0,0,$e,p.snowBiomeTop-m),pt.fillStyle="#b6db66",pt.fillRect(0,p.snowBiomeTop-m,$e,Ze-(p.snowBiomeTop-m)),oa.render("#b6db66",f,m)):(pt.fillStyle="#b6db66",pt.fillRect(0,0,$e,p.mapScale-p.snowBiomeTop-m),pt.fillStyle="#dbc666",pt.fillRect(0,p.mapScale-p.snowBiomeTop-m,$e,Ze-(p.mapScale-p.snowBiomeTop-m)),sa.render("#b6db66",f,m)),bi||((qe+=Ye*p.waveSpeed*ge)>=p.waveMax?(qe=p.waveMax,Ye=-1):qe<=1&&(qe=Ye=1),pt.globalAlpha=1,pt.fillStyle="#dbc666",ga(f,m,pt,p.riverPadding),pt.fillStyle="#91b2db",ga(f,m,pt,250*(qe-1))),pt.lineWidth=4,pt.strokeStyle="#000",pt.globalAlpha=.06,pt.beginPath();for(var g=-Ve;g<$e;g+=Ze/18)g>0&&(pt.moveTo(g,0),pt.lineTo(g,Ze));for(var y=-Fe;y<Ze;y+=Ze/18)g>0&&(pt.moveTo(0,y),pt.lineTo($e,y));pt.stroke(),pt.globalAlpha=1,pt.strokeStyle="#494947",ya(-1,f,m),pt.globalAlpha=1,pt.lineWidth=5.5,fa(0,f,m),Sa(f,m,0),pt.globalAlpha=1;for(o=0;o<Ee.length;++o)(be=Ee[o]).active&&be.visible&&(be.animate(ge),pt.save(),pt.translate(be.x-f,be.y-m),pt.rotate(be.dir+be.dirPlus-Math.PI/2),er(be,pt),pt.restore());if(ya(0,f,m),fa(1,f,m),ya(1,f,m),Sa(f,m,1),ya(2,f,m),ya(3,f,m),function(e,t){for(var n=Be.length-1;n>=0;--n){var i=Be[n],a=Date.now()-i.startTime;if(a>=i.duration)Be.splice(n,1);else{var r=a/i.duration,o=i.x-e,s=i.y-t;if(tr(o,s,i.scale)){pt.save(),pt.globalAlpha=1-r;var l=i.scale*(1+.5*r);if(Ni&&Ni.isLoaded)pt.translate(o,s),pt.scale(l/i.scale,l/i.scale),pt.drawImage(Ni,-i.scale/2,-i.scale/2,i.scale,i.scale),pt.translate(-o,-s);else{pt.fillStyle="#ff6b35",pt.beginPath(),pt.arc(o,s,l/2,0,2*Math.PI),pt.fill(),pt.strokeStyle="white",pt.lineWidth=2;for(var c=0;c<8;c++){var h=2*Math.PI*c/8,u=l;pt.beginPath(),pt.moveTo(o,s),pt.lineTo(o+Math.cos(h)*u,s+Math.sin(h)*u),pt.stroke()}}pt.restore()}}}}(f,m),function(e,t){for(var n=Ce.length-1;n>=0;--n){var i=Ce[n],a=Date.now()-i.startTime;if(a>=i.duration)Ce.splice(n,1);else{var r=a/i.duration,o=i.x-e,s=i.y-t;if(tr(o,s,i.scale)){pt.save(),pt.globalAlpha=1-r;var l=2*i.scale,c=40+20*(1-r);pt.strokeStyle="#00bfff",pt.lineWidth=4+2*(1-r),pt.lineCap="round",pt.lineJoin="round",pt.beginPath();var h=s-l;pt.moveTo(o,h);for(var u=l/6,d=1;d<=6;d++){var f=(Math.random()-.5)*c*(1-.5*r);6===d&&(f=0),pt.lineTo(o+f,h+u*d)}pt.stroke(),pt.strokeStyle="#ffffff",pt.lineWidth=2,pt.beginPath(),pt.moveTo(o,h);for(d=1;d<=6;d++){f=(Math.random()-.5)*c*.5*(1-.5*r);6===d&&(f=0),pt.lineTo(o+f,h+u*d)}pt.stroke(),pt.fillStyle="rgba(0, 191, 255, "+.3*(1-r)+")",pt.beginPath(),pt.arc(o,s,60*(1-.5*r),0,2*Math.PI),pt.fill(),pt.restore()}}}}(f,m),function(e,t){for(var n=Ae.length-1;n>=0;--n){var i=Ae[n],a=Date.now()-i.startTime;if(a>=i.duration)Ae.splice(n,1);else{var r=cr(i.sid);if(r){var o=a/i.duration,s=r.x-e,l=r.y-t;if(tr(s,l,100)){pt.save(),pt.globalAlpha=.8*(1-o);for(var c=0;c<4;c++){var h=2*Math.PI*c/4+.01*a,u=50+20*Math.random(),d=s+Math.cos(h)*u,f=l+Math.sin(h)*u;pt.strokeStyle="#ffff00",pt.lineWidth=2,pt.beginPath(),pt.moveTo(d,f);var p=s+40*(Math.random()-.5),m=l+40*(Math.random()-.5),g=(d+p)/2+30*(Math.random()-.5),y=(f+m)/2+30*(Math.random()-.5);pt.lineTo(g,y),pt.lineTo(p,m),pt.stroke()}pt.fillStyle="rgba(255, 255, 0, "+.15*(1-o)+")",pt.beginPath(),pt.arc(s,l,70*(1+.3*o),0,2*Math.PI),pt.fill(),pt.restore()}}else Ae.splice(n,1)}}}(f,m),pt.fillStyle="#000",pt.globalAlpha=.09,f<=0&&pt.fillRect(0,0,-f,Ze),p.mapScale-f<=$e){var v=Math.max(0,-m);pt.fillRect(p.mapScale-f,v,$e-(p.mapScale-f),Ze-v)}if(m<=0&&pt.fillRect(-f,0,$e+f,-m),p.mapScale-m<=Ze){var k=Math.max(0,-f),w=0;p.mapScale-f<=$e&&(w=$e-(p.mapScale-f)),pt.fillRect(k,p.mapScale-m,$e-k-w,Ze-(p.mapScale-m))}var b=I?.725:0;T<b?T=Math.min(b,T+5e-5*ge):T>b&&(T=Math.max(b,T-5e-5*ge)),T>.001&&(pt.globalAlpha=T,pt.fillStyle="#140028",pt.fillRect(0,0,$e,Ze)),pt.globalAlpha=1,pt.strokeStyle="#494947";for(o=0;o<Ie.length+Ee.length;++o)if((be=Ie[o]||Ee[o-Ie.length]).visible&&(10!=be.skinIndex||be==we||be.team&&be.team==we.team)){var x=be.name||"???";if(""!=x)if(be!=we){pt.font=(be.nameScale||30)+"px Hammersmith One",pt.fillStyle="#fff",pt.textBaseline="middle",pt.textAlign="center",pt.lineWidth=be.nameScale?11:8,pt.lineJoin="round",pt.strokeText(x,be.x-f,be.y-m-be.scale-(p.nameY+20)),pt.fillText(x,be.x-f,be.y-m-be.scale-(p.nameY+20));var S=Fe-Ze/2,M=be.team?"["+be.team+"]":"";if(""!=be.team&&(pt.font=(be.nameScale||30)+"px Hammersmith One",pt.fillStyle=be.nameColor?be.nameColor:"#fff",pt.textBaseline="middle",pt.textAlign="center",pt.lineWidth=be.nameScale?11:8,pt.lineJoin="round",pt.strokeText(M,be.x-f,be.y-S-be.scale-(p.nameY+20)-38),pt.fillText(M,be.x-f,be.y-S-be.scale-(p.nameY+20)-38)),be.isLeader&&Xi.crown.isLoaded){var P=p.crownIconScale;k=be.x-f-P/2-pt.measureText(M).width/2-p.crownPad;pt.drawImage(Xi.crown,k,be.y-S-be.scale-(p.nameY+20)-38-P/1.75,P,P)}if(1==be.iconIndex&&Xi.skull.isLoaded){P=p.crownIconScale,k=be.x-f-P/2+pt.measureText(x).width/2+p.crownPad;pt.drawImage(Xi.skull,k,be.y-m-be.scale-(p.nameY+20)-P/2-5,P,P)}if(be.isInvincible&&Xi.shield.isLoaded){P=p.crownIconScale;var B=be.isLeader?P+8:0;k=be.x-f-P/2-pt.measureText(x).width/2-p.crownPad-B;pt.drawImage(Xi.shield,k,be.y-m-be.scale-p.nameY-P/2-5,P,P)}if("true"==localStorage.getItem("show_ping")){var C=[];if("number"==typeof be.cps&&be.cps>=0&&C.push(Math.max(0,Math.round(be.cps))+" CPS"),"number"==typeof be.ping&&be.ping>=0&&C.push(be.ping+"ms"),C.length>0){var A=C.join(" | "),O=be.y-m+be.scale+p.nameY;pt.font="20px Hammersmith One",pt.lineWidth=6,pt.strokeText(A,be.x-f,O),pt.fillStyle="#fff",pt.fillText(A,be.x-f,O)}}}else if(1==be.iconIndex&&Xi.skull.isLoaded){P=p.crownIconScale,k=be.x-f;pt.drawImage(Xi.skull,k,be.y-m-be.scale-(p.nameY+20)-P/2-5,P,P)}if(be.health>0&&be.health<be.maxHealth-.5)if(fe){var D=p.healthBarWidth;be.HealthWidthMutli&&(D=p.healthBarWidth*HealthWidthMutli),pt.fillStyle="#494947",pt.roundRect(be.x-f-D-p.healthBarPad,be.y-m+be.scale+p.nameY,2*D+2*p.healthBarPad,17,4),pt.fill(),pt.fillStyle=be==we||be.team&&be.team==we.team?"#8ecc51":"#cc5151",pt.roundRect(be.x-f-D,be.y-m+be.scale+p.nameY+p.healthBarPad,2*D*(be.health/be.maxHealth),17-2*p.healthBarPad,2),pt.fill()}else{D=p.healthBarWidth;be.HealthWidthMutli&&(D=p.healthBarWidth*HealthWidthMutli),pt.fillStyle="#494947",pt.roundRect(be.x-f-D-p.healthBarPad,be.y-m-be.scale-(p.nameY+0),2*D+2*p.healthBarPad,17,4),pt.fill(),pt.fillStyle=be==we||be.team&&be.team==we.team?"#8ecc51":"#cc5151",pt.roundRect(be.x-f-D,be.y-m-be.scale-(p.nameY+0)+p.healthBarPad,2*D*(be.health/be.maxHealth),17-2*p.healthBarPad,2),pt.fill()}}E.update(ge,pt,f,m);for(o=0;o<Ie.length;++o)if((be=Ie[o]).visible&&be.chatCountdown>0){be.chatCountdown-=ge,be.chatCountdown<=0&&(be.chatCountdown=0);var R=null;if(be.chatSticker)if((R=la[be.chatSticker])&&R.isLoaded){k=be.x-f,v=be.y-be.scale-m-(""!=be.team?190:150);var _=125,j=125;pt.fillStyle="rgba(255, 255, 255, 1)",pt.roundRect(k-j/2,v-_/2,j,_,20),pt.lineWidth=10,pt.stroke(),pt.fill(),pt.fillStyle="rgba(73, 73, 71, 1)",pt.drawImage(R,k-50,v-50,100,100)}else{var L="ERROR: STICKER NOT LOADED";pt.font="32px Hammersmith One";var U=pt.measureText(L);pt.textBaseline="middle",pt.textAlign="center";k=be.x-f,v=be.y-be.scale-m-(""!=be.team?150:110),_=55,j=U.width+25;pt.fillStyle="rgba(255, 255, 255, 1)",pt.roundRect(k-j/2,v-_/2,j,_,20),pt.lineWidth=10,pt.stroke(),pt.fill(),pt.fillStyle="rgba(73, 73, 71, 1)",pt.fillText(L,k,v)}else{pt.font="32px Hammersmith One";U=pt.measureText(be.chatMessage);pt.textBaseline="middle",pt.textAlign="center";k=be.x-f,v=be.y-be.scale-m-(""!=be.team?150:110),_=55,j=U.width+25;pt.fillStyle="rgba(255, 255, 255, 1)",pt.roundRect(k-j/2,v-_/2,j,_,20),pt.lineWidth=10,pt.stroke(),pt.fill(),pt.fillStyle="rgba(73, 73, 71, 1)",pt.fillText(be.chatMessage,k,v)}}if(function(e){if(we&&we.alive){Yt.clearRect(0,0,Nt.width,Nt.height),Yt.strokeStyle="#fff",Yt.lineWidth=4;for(var t=0;t<Bn.length;++t)(Pn=Bn[t]).update(Yt,e);if(Yt.globalAlpha=1,Yt.fillStyle="#fff",Fa(we.x/p.mapScale*Nt.width,we.y/p.mapScale*Nt.height,7,Yt,!0),Yt.fillStyle="rgba(255,255,255,0.35)",we.team&&dn)for(t=0;t<dn.length;)Fa(dn[t]/p.mapScale*Nt.width,dn[t+1]/p.mapScale*Nt.height,7,Yt,!0),t+=2;un&&(Yt.fillStyle="#fc5553",Yt.font="34px Hammersmith One",Yt.textBaseline="middle",Yt.textAlign="center",Yt.fillText("",un.x/p.mapScale*Nt.width,un.y/p.mapScale*Nt.height)),fn&&(Yt.fillStyle="#fff",Yt.strokeStyle="#494947",Yt.font="34px Hammersmith One",Yt.textBaseline="middle",Yt.textAlign="center",Yt.strokeText("x",fn.x/p.mapScale*Nt.width,fn.y/p.mapScale*Nt.height),Yt.fillText("x",fn.x/p.mapScale*Nt.width,fn.y/p.mapScale*Nt.height))}}(ge),Ri>0||ji){ji||(Ri-=ge),pt.save(),pt.setTransform(1,0,0,1,0,0),pt.scale(xe,xe);pt.font="18px Hammersmith One",pt.fillStyle="#00ff00",pt.textAlign="left",pt.textBaseline="top",pt.fillText("=== PLAYER IDS ===",20,20);var H=Array.isArray(_i)?_i:[];for(o=0;o<H.length;++o){var V=H[o];if(V&&void 0!==V.sid&&void 0!==V.name){var F=45+25*o;pt.fillStyle="#ffffff",pt.fillText("ID: "+V.sid+" | "+V.name,20,F)}}Math.floor(ye/500)%2==0&&console.log("ID Display - Active: "+(ji?"toggle (auto-refresh)":"10s")+", Players: "+H.length,H),pt.restore()}-1!==Je.id&&da(Je.startX,Je.startY,Je.currentX,Je.currentY),-1!==Ke.id&&da(Ke.startX,Ke.startY,Ke.currentX,Ke.currentY)}function da(e,t,n,i){pt.save(),pt.setTransform(1,0,0,1,0,0),pt.scale(xe,xe);var a=50;pt.beginPath(),pt.arc(e,t,a,0,2*Math.PI,!1),pt.closePath(),pt.fillStyle="rgba(255, 255, 255, 0.3)",pt.fill();a=50;var r=n-e,o=i-t,s=Math.sqrt(Math.pow(r,2)+Math.pow(o,2)),l=s>a?s/a:1;r/=l,o/=l,pt.beginPath(),pt.arc(e+r,t+o,.5*a,0,2*Math.PI,!1),pt.closePath(),pt.fillStyle="white",pt.fill(),pt.restore()}function fa(e,t,n){for(var i=0;i<Pe.length;++i)(be=Pe[i]).active&&be.layer==e&&(be.update(ge),be.active&&tr(be.x-t,be.y-n,be.scale)&&(pt.save(),pt.translate(be.x-t,be.y-n),pt.rotate(be.dir),ma(0,0,be,be.variantSrc||"",pt,1),pt.restore()))}var pa={};function ma(e,t,n,i,a,r){if(n.src){var o=n.src+i,s=pa[o];s||((s=new Image).onload=function(){this.isLoaded=!0,this.onload=null},s.src="../img/weapons/"+o+".png",pa[o]=s),s.isLoaded?a.drawImage(s,e-n.scale/2,t-n.scale/2,n.scale,n.scale):(a.save(),a.globalAlpha=.6,a.fillStyle="#555555",a.beginPath(),a.arc(e,t,4,0,2*Math.PI),a.fill(),a.restore())}else 1==n.indx&&(a.fillStyle="#939393",Fa(e,t,n.scale,a))}function ga(e,t,n,i){var a=p.riverWidth+i,r=p.mapScale/2-t-a/2;r<Ze&&r+a>0&&n.fillRect(0,r,$e,a)}function ya(e,t,n){var i,a=He[e];if(a&&a.length)for(var r=0;r<a.length;++r){var o=a[r];be=o.obj;var s=o.x,l=o.y;if(pt.globalAlpha=be.hideFromEnemy?.6:1,be.isItem){if(i=Va(be),ba(be),"sapling"==be.name)if((u=(1-(h=pt.globalAlpha))/.6)>.01){var c=Ua(be);pt.globalAlpha=u,pt.drawImage(c,s-c.width/2,l-c.height/2),pt.globalAlpha=h}pt.save(),pt.translate(s,l),pt.rotate(be.dir),pt.drawImage(i,-i.width/2,-i.height/2),be.blocker&&(pt.strokeStyle="#db6e6e",pt.globalAlpha=.3,pt.lineWidth=6,Fa(0,0,be.blocker,pt,!1,!0),pt.fillStyle="#db6e6e",pt.globalAlpha=.15,Fa(0,0,be.blocker,pt)),pt.restore()}else{var h,u;if(i=Ra(be),ka(be),0===be.type)if((u=(1-(h=pt.globalAlpha))/.6)>.01){c=ja(be);pt.globalAlpha=u,pt.drawImage(c,s-c.width/2,l-c.height/2),pt.globalAlpha=h}pt.drawImage(i,s-i.width/2,l-i.height/2)}}}var va=[];function ka(e){Ra(e);if(we&&0===e.type){var t,n;null!==(n=va[t=e.sid])&&void 0!==n||(va[t]=1);var i=d.getDistance(e.x,e.y,we.x2,we.y2)<=e.scale+we.scale;va[e.sid]=Math[i?"max":"min"](i?.4:1,va[e.sid]+(i?-.06:.06)),pt.globalAlpha=va[e.sid]}}var wa=[];function ba(e){Va(e);if(we&&("sapling"==e.name||"shrub"==e.name)){var t,n;null!==(n=wa[t=e.sid])&&void 0!==n||(wa[t]=1);var i=d.getDistance(e.x,e.y,we.x2,we.y2)<=e.scale+we.scale;wa[e.sid]=Math[i?"max":"min"](i?.4:1,wa[e.sid]+(i?-.06:.06)),pt.globalAlpha=wa[e.sid]}}function xa(e,t,n){(be=cr(e))&&be.startAnim(t,n)}function Sa(e,t,n){pt.globalAlpha=1;for(var i=0;i<Ie.length;++i)(be=Ie[i]).zIndex==n&&(be.animate(ge),be.visible&&(be.skinRot+=.002*ge,Ne=(be==we?ai():be.dir)+be.dirPlus,pt.save(),pt.translate(be.x-e,be.y-t),pt.rotate(Ne),Ea(be,pt),pt.restore()))}function Ea(e,t){(t=t||pt).lineWidth=5.5,t.lineJoin="miter";var n=Math.PI/4*(g.weapons[e.weaponIndex].armS||1),i=e.buildIndex<0&&g.weapons[e.weaponIndex].hndS||1,a=e.buildIndex<0&&g.weapons[e.weaponIndex].hndD||1,r=e.dirPlus2-e.dirPlus;if(e.tailIndex>0&&function(e,t,n){if(!(Ia=Ba[e])){var i=new Image;i.onload=function(){this.isLoaded=!0,this.onload=null},i.src=".././img/accessories/access_"+e+".png",Ba[e]=i,Ia=i}var a=Ca[e];if(!a){for(var r=0;r<Qt.length;++r)if(Qt[r].id==e){a=Qt[r];break}Ca[e]=a}Ia.isLoaded&&(t.save(),t.translate(-20-(a.xOff||0),0),a.spin&&t.rotate(n.skinRot),t.drawImage(Ia,-a.scale/2,-a.scale/2,a.scale,a.scale),t.restore())}(e.tailIndex,t,e),t.rotate(r),e.buildIndex<0&&!g.weapons[e.weaponIndex].aboveHand&&(Oa(g.weapons[e.weaponIndex],p.weaponVariants[e.weaponVariant].src,e.scale,0,t),null==g.weapons[e.weaponIndex].projectile||g.weapons[e.weaponIndex].hideProjectile||ma(e.scale,0,g.projectiles[g.weapons[e.weaponIndex].projectile],p.weaponVariants[e.weaponVariant].src,pt)),t.fillStyle=p.skinColors[e.skinColor],Fa(e.scale*Math.cos(n),e.scale*Math.sin(n),14),Fa(e.scale*a*Math.cos(-n*i),e.scale*a*Math.sin(-n*i),14),e.buildIndex<0&&g.weapons[e.weaponIndex].aboveHand&&(Oa(g.weapons[e.weaponIndex],p.weaponVariants[e.weaponVariant].src,e.scale,0,t),null==g.weapons[e.weaponIndex].projectile||g.weapons[e.weaponIndex].hideProjectile||ma(e.scale,0,g.projectiles[g.weapons[e.weaponIndex].projectile],p.weaponVariants[e.weaponVariant].src,pt)),e.buildIndex>=0){var o=Va(g.list[e.buildIndex]);t.drawImage(o,e.scale-g.list[e.buildIndex].holdOffset,-o.width/2)}t.rotate(-r),Fa(0,0,e.scale,t),e.skinIndex>0&&(t.rotate(Math.PI/2),Pa(e.skinIndex,t,null,e))}var Ia,Ta={},Ma={};function Pa(e,t,n,i){if(!(Ia=Ta[e])){var a=new Image;a.onload=function(){this.isLoaded=!0,this.onload=null},a.src=".././img/hats/hat_"+e+".png",Ta[e]=a,Ia=a}var r=n||Ma[e];if(!r){for(var o=0;o<Kt.length;++o)if(Kt[o].id==e){r=Kt[o];break}Ma[e]=r}Ia.isLoaded?t.drawImage(Ia,-r.scale/2,-r.scale/2,r.scale,r.scale):(t.save(),t.fillStyle="#666666",t.globalAlpha=.4,t.fillRect(-r.scale/2,-r.scale/2,r.scale,r.scale),t.restore()),!n&&r.topSprite&&(t.save(),t.rotate(i.skinRot),Pa(e+"_top",t,r,i),t.restore())}var Ba={},Ca={};var Aa={};function Oa(e,t,n,i,a){var r=e.src+(t||""),o=Aa[r];o||((o=new Image).onload=function(){this.isLoaded=!0},o.src=".././img/weapons/"+r+".png",Aa[r]=o),o.isLoaded&&a.drawImage(o,n+e.xOff-e.length/2,i+e.yOff-e.width/2,e.length,e.width)}var Da={};function Ra(e){var t=e.y>=p.mapScale-p.snowBiomeTop?2:e.y<=p.snowBiomeTop?1:0,n=e.type+"_"+e.scale+"_"+t,i=Da[n];if(!i){var a=document.createElement("canvas");a.width=a.height=2.1*e.scale+5.5;var r=a.getContext("2d");if(r.translate(a.width/2,a.height/2),r.rotate(d.randFloat(0,Math.PI)),r.strokeStyle="#494947",r.lineWidth=5.5,r.lineJoin="round",r.lineCap="round",0==e.type)for(var o,s=0;s<2;++s)qa(r,8,o=be.scale*(s?.55:1),.75*o),r.fillStyle=t?s?"#9BE374":"#81C35E":s?"#B4DB62":"#9ebf57",r.fill(),s||r.stroke();else if(1==e.type)if(2==t){r.fillStyle="#606060",Na(r,6,.3*e.scale,.71*e.scale),r.fill(),r.stroke(),r.fillStyle="#89a54c",Fa(0,0,.55*e.scale*.75,r),r.fillStyle="#a5c65b",Fa(0,0,.3*e.scale*.75,r,!0)}else{var l;qa(r,7,be.scale,.7*be.scale),r.fillStyle=t?"#659D46":"#89a54c",r.fill(),r.stroke(),qa(r,7,be.scale/1.75,be.scale/1.75*.7),r.fillStyle="#9ebf57",r.fill(),r.fillStyle=t?"#5D56B3":"#c15555";var c=2*be.scale/35,h=le/c;for(s=0;s<c;++s)Fa((l=d.randInt(be.scale/3.5,be.scale/2.3))*Math.cos(h*s),l*Math.sin(h*s),d.randInt(10,12),r)}else 2!=e.type&&3!=e.type||(r.fillStyle=2==e.type?2==t?"#938d77":"#939393":"#e0c655",Na(r,Math.round(e.scale/115*3),e.scale,e.scale),r.fill(),r.stroke(),r.fillStyle=2==e.type?2==t?"#b2ab90":"#bcbcbc":"#ebdca3",Na(r,e.scale/115*3,.55*e.scale,.65*e.scale),r.fill());i=a,Da[n]=i}return i}var _a={};function ja(e){var t=e.y>=p.mapScale-p.snowBiomeTop?2:e.y<=p.snowBiomeTop?1:0,n="trunk_"+e.scale+"_"+t,i=_a[n];if(!i){var a=.3*e.scale,r=2*e.scale+11,o=document.createElement("canvas");o.width=o.height=r;var s=o.getContext("2d");s.translate(o.width/2,o.height/2),s.rotate(d.randFloat(0,Math.PI)),s.strokeStyle="#494947",s.lineWidth=5.5,s.fillStyle=2===t?"#8a7560":"#7a5a3a",qa(s,6,a-.4,a),s.fill(),s.stroke(),s.fillStyle=2===t?"#9e8972":"#8e6e4e",qa(s,6,.6*a-.4,.6*a),s.fill(),i=o,_a[n]=i}return i}var La={};function Ua(e){var t=e.y>=p.mapScale-p.snowBiomeTop?2:e.y<=p.snowBiomeTop?1:0,n="saptrunk_"+e.scale+"_"+t,i=La[n];if(!i){var a=e.scale*(e.colDiv||.2),r=2.5*e.scale+5.5,o=document.createElement("canvas");o.width=o.height=r;var s=o.getContext("2d");s.translate(o.width/2,o.height/2),s.rotate(d.randFloat(0,Math.PI)),s.strokeStyle="#494947",s.lineWidth=5.5,s.fillStyle=2===t?"#8a7560":"#7a5a3a",qa(s,5,a-.4,a),s.fill(),s.stroke(),s.fillStyle=2===t?"#9e8972":"#8e6e4e",qa(s,5,.6*a-.4,.6*a),s.fill(),i=o,La[n]=i}return i}var Ha=[];function Va(e,t){var n,i,a,r,o,s,l,c,h=Ha[e.id];if(!h||t){var u=document.createElement("canvas");u.width=u.height=2.5*e.scale+5.5+(g.list[e.id].spritePadding||0);var f=u.getContext("2d");if(f.translate(u.width/2,u.height/2),f.rotate(t?0:Math.PI/2),f.strokeStyle="#494947",f.lineWidth=5.5*(t?u.width/81:1),f.lineJoin="round",f.lineCap="round","apple"==e.name){f.fillStyle="#c15555",Fa(0,0,e.scale,f),f.fillStyle="#89a54c";var m=-Math.PI/2;n=e.scale*Math.cos(m),i=e.scale*Math.sin(m),a=25,r=m+Math.PI/2,o=f,s=n+a*Math.cos(r),l=i+a*Math.sin(r),c=.4*a,o.moveTo(n,i),o.beginPath(),o.quadraticCurveTo((n+s)/2+c*Math.cos(r+Math.PI/2),(i+l)/2+c*Math.sin(r+Math.PI/2),s,l),o.quadraticCurveTo((n+s)/2-c*Math.cos(r+Math.PI/2),(i+l)/2-c*Math.sin(r+Math.PI/2),n,i),o.closePath(),o.fill(),o.stroke()}else if("cookie"==e.name){f.fillStyle="#cca861",Fa(0,0,e.scale,f),f.fillStyle="#937c4b";for(var y=le/(k=4),v=0;v<k;++v)Fa((I=d.randInt(e.scale/2.5,e.scale/1.7))*Math.cos(y*v),I*Math.sin(y*v),d.randInt(4,5),f,!0)}else if("pizza"==e.name){f.fillStyle="#cca861",Fa(0,0,e.scale,f),f.fillStyle="#ead467",Fa(0,0,.7*e.scale,f,!0);for(y=le/(k=4),v=0;v<k;++v)f.fillStyle=d.randInt(0,1)?"#d86868":"#93b253",Fa((I=d.randInt(e.scale/2.5,e.scale/1.7))*Math.cos(y*v),I*Math.sin(y*v),d.randInt(4,5),f,!0)}else if("cheese"==e.name){f.fillStyle="#f4f3ac",Fa(0,0,e.scale,f),f.fillStyle="#c3c28b";var k;for(y=le/(k=4),v=0;v<k;++v)Fa((I=d.randInt(e.scale/2.5,e.scale/1.7))*Math.cos(y*v),I*Math.sin(y*v),d.randInt(4,5),f,!0)}else if("wood wall"==e.name||"stone wall"==e.name||"castle wall"==e.name||"rock wall"==e.name||"boulder wall"==e.name){f.fillStyle="boulder wall"==e.name?"#626974":"rock wall"==e.name?"#787E87":"castle wall"==e.name?"#83898e":"wood wall"==e.name?"#a5974c":"#939393";var w="boulder wall"==e.name?6:"rock wall"==e.name?5:"castle wall"==e.name?4:3;Na(f,w,1.1*e.scale,1.1*e.scale),f.fill(),f.stroke(),f.fillStyle="boulder wall"==e.name?"#6D7A84":"rock wall"==e.name?"#8895A1":"castle wall"==e.name?"#9da4aa":"wood wall"==e.name?"#c9b758":"#bcbcbc",Na(f,w,.65*e.scale,.65*e.scale),f.fill()}else if("spikes"==e.name){f.fillStyle="#939393";var b=.6*e.scale;Na(f,4,e.scale,b),f.fill(),f.stroke();var x=40.055,S=.8;f.rotate(x),b=e.scale*S,f.fillStyle="#a5974c",Na(f,2,b,b),f.fill(),f.stroke(),f.fillStyle="#c9b758",Na(f,2,b/2,b/2),f.fill(),f.fill()}else if("greater spikes"==e.name){f.fillStyle="#939393";b=.6*e.scale;Na(f,8,e.scale,b),f.fill(),f.stroke();x=20.0275,S=.7;f.rotate(x),b=e.scale*S,f.fillStyle="#a5974c",Na(f,4,b,b),f.fill(),f.stroke(),f.fillStyle="#c9b758",Na(f,4,b/2,b/2),f.fill()}else if("spinning spikes"==e.name){f.fillStyle="#939393";b=.6*e.scale;Na(f,7,e.scale,b),f.fill(),f.stroke(),f.fillStyle="#a5974c",Fa(0,0,b,f),f.fillStyle="#c9b758",Fa(0,0,b/2,f,!0)}else if("poison spikes"==e.name){f.fillStyle="#7b935d";b=.6*e.scale;Na(f,6,e.scale,b),f.fill(),f.stroke();x=40.055/1.5,S=.75;f.rotate(x),b=e.scale*S,f.fillStyle="#a5974c",Na(f,3,b,b),f.fill(),f.stroke(),f.fillStyle="#c9b758",Na(f,3,b/2,b/2),f.fill()}else if("windmill"==e.name||"turbine"==e.name||"generator"==e.name)f.fillStyle="#a5974c",Fa(0,0,e.scale,f),f.fillStyle="#c9b758",Wa(0,0,1.5*e.scale,29,"generator"==e.name?8:"turbine"==e.name?6:4,f),f.fillStyle="#a5974c",Fa(0,0,.5*e.scale,f);else if("mine"==e.name)f.fillStyle="#939393",Na(f,3,e.scale,e.scale),f.fill(),f.stroke(),f.fillStyle="#bcbcbc",Na(f,3,.55*e.scale,.65*e.scale),f.fill();else if("sapling"==e.name){var E=e.y>=p.mapScale-p.snowBiomeTop?2:e.y<=p.snowBiomeTop?1:0;for(v=0;v<2;++v){qa(f,6,b=1.25*e.scale*(v?.55:1),.75*b),f.fillStyle=E?v?"#9BE374":"#81C35E":v?"#B4DB62":"#9ebf57",f.fill(),v||f.stroke()}}else if("shrub"==e.name){var I,T=1.25*e.scale,M=.75*e.scale;qa(f,5,T,.7*T),f.fillStyle="#89a54c",f.fill(),f.stroke(),qa(f,5,M,.7*M),f.fillStyle="#9ebf57",f.fill(),f.fillStyle="#c15555";for(y=le/3,v=0;v<3;++v)Fa((I=d.randInt(T/3.5,T/2.3))*Math.cos(y*v),I*Math.sin(y*v),d.randInt(10,12),f)}else if("gold mine"==e.name)f.fillStyle="#e0c655",Na(f,3,e.scale,e.scale),f.fill(),f.stroke(),f.fillStyle="#ebdca3",Na(f,3,.55*e.scale,.65*e.scale),f.fill();else if("door"==e.name)f.fillStyle="#a5974c",Na(f,3,1.1*e.scale,1.1*e.scale),f.fill(),f.stroke(),f.fillStyle="#494947",Na(f,3,.65*e.scale,.65*e.scale),f.fill();else if("wood roof"==e.name)f.fillStyle="#8A7560",Na(f,3,1.1*e.scale,1.1*e.scale),f.fill(),f.stroke(),f.fillStyle="#9E8972",Na(f,3,.65*e.scale,.65*e.scale),f.fill();else if("wood bridge"==e.name)f.fillStyle="#827848",Na(f,3,1.1*e.scale,1.1*e.scale),f.fill(),f.stroke(),f.fillStyle="#A5974C",Na(f,3,.65*e.scale,.65*e.scale),f.fill();else if("greater bridge"==e.name)f.fillStyle="#818181",za(0,0,2*e.scale,2*e.scale,f),f.fill(),f.stroke(),f.fillStyle="#939393",za(0,0,1.4*e.scale,1.4*e.scale,f),f.fill();else if("pit trap"==e.name)f.fillStyle="#a5974c",Na(f,2.5,1.1*e.scale,1.1*e.scale),f.fill(),f.stroke(),f.fillStyle="#494947",Na(f,2.5,.65*e.scale,.65*e.scale),f.fill();else if("boost pad"==e.name)f.fillStyle="#7e7f82",za(0,0,2*e.scale,2*e.scale,f),f.fill(),f.stroke(),f.fillStyle="#dbd97d",function(e,t){t=t||pt;var n=e*(Math.sqrt(3)/2);t.beginPath(),t.moveTo(0,-n/2),t.lineTo(-e/2,n/2),t.lineTo(e/2,n/2),t.lineTo(0,-n/2),t.fill(),t.closePath()}(1*e.scale,f);else if("basic turret"==e.name){f.fillStyle="#a5974c",Fa(0,0,e.scale,f),f.fill(),f.stroke(),f.fillStyle="#939393",za(0,-(P=50)/2,.45*e.scale,P,f),Fa(0,0,.6*e.scale,f),f.fill(),f.stroke()}else if("buster turret"==e.name){var P;f.fillStyle="#a5974c",Fa(0,0,e.scale,f),f.fill(),f.stroke(),f.fillStyle="#939393",za(0,-(P=50)/2,.9*e.scale,P,f),Fa(0,0,.6*e.scale,f),f.fill(),f.stroke()}else if("platform"==e.name){f.fillStyle="#cebd5f";var B=2*e.scale,C=B/4,A=-e.scale/2;for(v=0;v<4;++v)za(A-C/2,0,C,2*e.scale,f),f.fill(),f.stroke(),A+=B/4}else"healing pad"==e.name?(f.fillStyle="#7e7f82",za(0,0,2*e.scale,2*e.scale,f),f.fill(),f.stroke(),f.fillStyle="#db6e6e",Wa(0,0,.65*e.scale,20,4,f,!0)):"spawn pad"==e.name?(f.fillStyle="#7e7f82",za(0,0,2*e.scale,2*e.scale,f),f.fill(),f.stroke(),f.fillStyle="#71aad6",Fa(0,0,.6*e.scale,f)):"blocker"==e.name?(f.fillStyle="#7e7f82",Fa(0,0,e.scale,f),f.fill(),f.stroke(),f.rotate(Math.PI/4),f.fillStyle="#db6e6e",Wa(0,0,.65*e.scale,20,4,f,!0)):"teleporter"==e.name&&(f.fillStyle="#7e7f82",Fa(0,0,e.scale,f),f.fill(),f.stroke(),f.rotate(Math.PI/4),f.fillStyle="#d76edb",Fa(0,0,.5*e.scale,f,!0));h=u,t||(Ha[e.id]=h)}return h}function Fa(e,t,n,i,a,r){(i=i||pt).beginPath(),i.arc(e,t,n,0,2*Math.PI),r||i.fill(),a||i.stroke()}function Na(e,t,n,i){var a,r,o=Math.PI/2*3,s=Math.PI/t;if(e.beginPath(),Math.abs(i-n)<.001){e.moveTo(Math.cos(o)*n,Math.sin(o)*n);for(var l=0;l<2*t;l++)o+=s,a=Math.cos(o)*n,r=Math.sin(o)*n,e.lineTo(a,r);e.closePath()}else{e.moveTo(0,-n);for(l=0;l<t;l++)a=Math.cos(o)*n,r=Math.sin(o)*n,e.lineTo(a,r),o+=s,a=Math.cos(o)*i,r=Math.sin(o)*i,e.lineTo(a,r),o+=s;e.lineTo(0,-n),e.closePath()}}function za(e,t,n,i,a,r){a.fillRect(e-n/2,t-i/2,n,i),r||a.strokeRect(e-n/2,t-i/2,n,i)}function Wa(e,t,n,i,a,r,o){r.save(),r.translate(e,t),a=Math.ceil(a/2);for(var s=0;s<a;s++)za(0,0,2*n,i,r,o),r.rotate(Math.PI/a);r.restore()}function qa(e,t,n,i){var a,r=Math.PI/2*3,o=Math.PI/t;e.beginPath(),e.moveTo(0,-i);for(var s=0;s<t;s++)a=d.randInt(n+.9,1.2*n),e.quadraticCurveTo(Math.cos(r+o)*a,Math.sin(r+o)*a,Math.cos(r+2*o)*i,Math.sin(r+2*o)*i),r+=2*o;e.lineTo(0,-i),e.closePath()}function Ya(e){for(var t=0;t<e.length;)en.add(e[t],e[t+1],e[t+2],e[t+3],e[t+4],e[t+5],g.list[e[t+6]],!0,e[t+7]>=0?{sid:e[t+7]}:null),t+=8}function Xa(e,t){(be=ur(t))&&(be.xWiggle+=p.gatherWiggle*Math.cos(e),be.yWiggle+=p.gatherWiggle*Math.sin(e))}function Ga(e,t){(be=ur(e))&&(be.dir=t,be.xWiggle+=p.gatherWiggle*Math.cos(t+Math.PI),be.yWiggle+=p.gatherWiggle*Math.sin(t+Math.PI))}function Ja(e,t,n,i,a,r,o,s,l){on&&(_e.addProjectile(e,t,n,i,a,r,null,null,o,s).sid=l)}function Ka(e,t){for(var n=0;n<Pe.length;++n)Pe[n].sid==e&&(Pe[n].range=t)}function Qa(e){(be=hr(e))&&be.startAnim()}function $a(e){for(var t=0;t<Ee.length;++t)Ee[t].forcePos=!Ee[t].visible,Ee[t].visible=!1;if(e){var n=Date.now();for(t=0;t<e.length;)(be=hr(e[t]))?(be.index=e[t+1],be.t1=void 0===be.t2?n:be.t2,be.t2=n,be.x1=be.x,be.y1=be.y,be.x2=e[t+2],be.y2=e[t+3],be.d1=void 0===be.d2?e[t+4]:be.d2,be.d2=e[t+4],be.health=e[t+5],be.dt=0,be.visible=!0):((be=Ue.spawn(e[t+2],e[t+3],e[t+4],e[t+1])).x2=be.x,be.y2=be.y,be.d2=be.dir,be.health=e[t+5],Ue.aiTypes[e[t+1]].name||(be.name=p.cowNames[e[t+6]]),be.forcePos=!0,be.sid=e[t],be.visible=!0),t+=7}}var Za={};function er(e,t){var n=e.index,i=Za[n];if(!i){var a=new Image;a.onload=function(){this.isLoaded=!0,this.onload=null},a.src=".././img/animals/"+e.src+".png",i=a,Za[n]=i}if(i.isLoaded){var r=1.2*e.scale*(e.spriteMlt||1);t.drawImage(i,-r,-r,2*r,2*r)}else t.save(),t.fillStyle="#777777",t.globalAlpha=.5,Fa(0,0,e.scale,t),t.restore()}function tr(e,t,n){return e+n>=0&&e-n<=$e&&t+n>=0&&t-n<=Ze}function nr(e,t){var n=function(e){for(var t=0;t<Ie.length;++t)if(Ie[t].id==e)return Ie[t];return null}(e[0]);n||(n=new v(e[0],e[1],p,d,_e,en,Ie,Ee,g,Kt,Qt,null,null,null,$t,Zt),Ie.push(n)),n.spawn(t?me:null),n.visible=!1,n.x2=void 0,n.y2=void 0,n.setData(e),t&&(we=n,Ir.length=0,Tr=0,Mr=!0,Cr(Date.now()),Ve=we.x,Fe=we.y,Fn(),Yi(),Qi(),Ki(0),St.style.display="block")}function ir(e){for(var t=0;t<Ie.length;t++)if(Ie[t].id==e){Ie.splice(t,1);break}}function ar(e,t){we&&(we.itemCounts[e]=t)}function rr(e,t,n){we&&(we[e]=t,n&&Yi())}function or(e,t){(be=cr(e))&&(be.health=t)}function sr(e,t){console.log(e,t)}function lr(e){for(var t=Date.now(),n=0;n<Ie.length;++n)Ie[n].forcePos=!Ie[n].visible,Ie[n].visible=!1;for(n=0;n<e.length;)(be=cr(e[n]))&&(be.t1=void 0===be.t2?t:be.t2,be.t2=t,be.x1=be.x,be.y1=be.y,be.x2=e[n+1],be.y2=e[n+2],be.d1=void 0===be.d2?e[n+3]:be.d2,be.d2=e[n+3],be.dt=0,be.buildIndex=e[n+4],be.weaponIndex=e[n+5],be.weaponVariant=e[n+6],be.team=e[n+7],be.isLeader=e[n+8],be.skinIndex=e[n+9],be.tailIndex=e[n+10],be.iconIndex=e[n+11],be.zIndex=e[n+12],be.cps="number"==typeof e[n+13]?Math.max(0,Math.round(e[n+13])):0,be.ping="number"==typeof e[n+14]?Math.max(-1,Math.round(e[n+14])):-1,be.avatarIndex=e[n+15],be.gloveIndex=e[n+16],be.visible=!0,be.sid==we.sid&&(be.weaponIndex<=9?be.primaryVariant!=be.weaponVariant&&(be.primaryVariant=be.weaponVariant,Vn[be.weaponIndex](be.weaponVariant)):be.secondaryVariant!=be.weaponVariant&&(be.secondaryVariant=be.weaponVariant,Vn[be.weaponIndex](be.weaponVariant)))),n+=15}function cr(e){for(var t=0;t<Ie.length;++t)if(Ie[t].sid==e)return Ie[t];return null}function hr(e){for(var t=0;t<Ee.length;++t)if(Ee[t].sid==e)return Ee[t];return null}function ur(e){for(var t=0;t<Me.length;++t)if(Me[t].sid==e)return Me[t];return null}var dr,fr=-1,pr=0,mr=Date.now(),gr=0,yr=0,vr=Date.now(),kr=null,wr=null,br=null,xr=null,Sr=null,Er=null,Ir=[],Tr=0,Mr=!0,Pr=0;function Br(){localStorage.getItem("show_ping")?document.getElementById("performanceDisplay").style.display="block":document.getElementById("performanceDisplay").style.display="none"}function Cr(e){e||(e=Date.now()),function(e){for(var t=e-1e3;Ir.length&&Ir[0]<t;)Ir.shift()}(e),Tr=Ir.length,br&&(br.textContent=Math.max(0,Math.round(Tr)).toString())}function Ar(){if(we&&$()){var e=Date.now();if(Mr&&!(e-Pr<200)){Cr(e);var t="number"==typeof window.pingTime&&window.pingTime>=0?Math.round(window.pingTime):-1;u.send("p",Math.max(0,Math.round(Tr)),t),Mr=!1,Pr=e}}}function Or(){var e=Date.now()-fr;window.pingTime=e,wr&&(wr.textContent=e+"ms"),Er&&(Er.textContent=e+"ms"),Mr=!0}function Dr(){fr=Date.now(),u.send("0")}function Rr(e){if(!(e<0)){var t=Math.floor(e/60),n=e%60;n=("0"+n).slice(-2),kt.innerText="Server restarting in "+t+":"+n,kt.hidden=!1}}window.requestAnimationFrame=window.requestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},dr=p.mapScale/2,en.add(0,dr,dr+200,0,p.treeScales[d.randInt(1,5)],0),en.add(1,dr,dr-480,0,p.treeScales[d.randInt(1,5)],0),en.add(2,dr+300,dr+450,0,p.treeScales[d.randInt(1,5)],0),en.add(3,dr-950,dr-130,0,p.treeScales[d.randInt(1,5)],0),en.add(4,dr-750,dr-400,0,p.treeScales[d.randInt(1,5)],0),en.add(5,dr-700,dr+400,0,p.treeScales[d.randInt(1,5)],0),en.add(6,dr+800,dr-200,0,p.treeScales[d.randInt(1,5)],0),en.add(7,dr-260,dr+340,0,p.bushScales[d.randInt(1,4)],1),en.add(8,dr+760,dr+310,0,p.bushScales[d.randInt(1,4)],1),en.add(9,dr-800,dr+100,0,p.bushScales[d.randInt(1,4)],1),en.add(10,dr-800,dr+300,0,g.list[4].scale,g.list[4].id,g.list[d.randInt(13,15)]),en.add(11,dr+650,dr-390,0,g.list[4].scale,g.list[4].id,g.list[d.randInt(13,15)]),en.add(12,dr-400,dr-450,0,p.rockScales[d.randInt(1,7)],2),function e(){ye=Date.now(),ge=ye-Se,Se=ye,ua(),function(){if(kr){pr++;var e=Date.now();e-mr>=1e3&&(xr&&(xr.textContent=pr),pr=0,mr=e),e-vr>=1e3&&(yr=gr,gr=0,vr=e,Sr&&(Sr.textContent=yr+"/s")),Cr(e),Ar()}}(),window.requestAnimationFrame(e)}(),window.openLink=function(e){window.open(e,"_blank")},window.aJoinReq=Sn,window.follmoo=function(){me||(me=!0,ce("moofoll",1))},window.showAuthModal=L,window.hideAuthModal=U,window.submitAuth=V,window.logoutAccount=F,window.kickFromClan=En,window.sendJoin=In,window.leaveAlliance=Mn,window.createAlliance=Tn,window.storeBuy=Un,window.storeEquip=Ln,window.showItemInfo=hn,window.selectSkinColor=Wn,window.changeStoreIndex=function(e){Dn!=e&&(Dn=e,jn()),_n()},window.switchServerMode=function(e){window.location.href="sandbox"===e?"//sandbox.moomoo.io/":"//moomoo.io/"},window.incrementPacketCounter=function(){gr++}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t,i){function a(e,t){return n(e)===t}var r=[],o=[],s={_version:"3.5.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout((function(){t(n[e])}),0)},addTest:function(e,t,n){o.push({name:e,fn:t,options:n})},addAsyncTest:function(e){o.push({name:null,fn:e})}},l=function(){};l.prototype=s,l=new l;var c=t.documentElement,h="svg"===c.nodeName.toLowerCase();l.addTest("passiveeventlisteners",(function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});e.addEventListener("test",null,n)}catch(e){}return t})),function(){var e,t,n,i,s,c;for(var h in o)if(o.hasOwnProperty(h)){if(e=[],(t=o[h]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(i=a(t.fn,"function")?t.fn():t.fn,s=0;s<e.length;s++)1===(c=e[s].split(".")).length?l[c[0]]=i:(!l[c[0]]||l[c[0]]instanceof Boolean||(l[c[0]]=new Boolean(l[c[0]])),l[c[0]][c[1]]=i),r.push((i?"":"no-")+c.join("-"))}}(),function(e){var t=c.className,n=l._config.classPrefix||"";if(h&&(t=t.baseVal),l._config.enableJSClass){var i=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(i,"$1"+n+"js$2")}l._config.enableClasses&&(t+=" "+n+e.join(" "+n),h?c.className.baseVal=t:c.className=t)}(r),delete s.addTest,delete s.addAsyncTest;for(var u=0;u<l._q.length;u++)l._q[u]();e.Modernizr=l}(window,document)},function(e,t,n){var i=n(22),a=function(){};function r(){this.socket=null,this.connected=!1,this.socketId=-1,this._callback=a,this._handlers=Object.create(null),this._suppressCloseNotification=!1,this._handleOpen=this._handleOpen.bind(this),this._handleClose=this._handleClose.bind(this),this._handleError=this._handleError.bind(this),this._handleMessage=this._handleMessage.bind(this)}r.prototype.connect=function(e,t,n){if(!e)throw new Error("connect(address) requires a WebSocket address.");this._callback="function"==typeof t?t:a,this._handlers=this._normalizeHandlers(n),this._suppressCloseNotification=!1,this.socket&&this.close();try{this.socket=new WebSocket(e)}catch(e){return console.error("Socket creation failed:",e),void this._notifyCallback(e||"Socket error")}this.socket.binaryType="arraybuffer",this.socket.onopen=this._handleOpen,this.socket.onclose=this._handleClose,this.socket.onerror=this._handleError,this.socket.onmessage=this._handleMessage},r.prototype.send=function(e){if(this.socketReady()){var t=Array.prototype.slice.call(arguments,1);try{var n=i.encode([e,t]);this.socket.send(n)}catch(e){return void console.error("Failed to send packet:",e)}"undefined"!=typeof window&&"function"==typeof window.incrementPacketCounter&&window.incrementPacketCounter()}else console.warn("Attempted to send packet before socket was ready:",e)},r.prototype.socketReady=function(){return Boolean(this.socket&&this.connected)},r.prototype.close=function(){this.socket?this.socket.close():this.connected=!1},r.prototype._handleOpen=function(){this.connected=!0,this._notifyCallback()},r.prototype._handleClose=function(e){var t;this.connected=!1,this.socketId=-1;var n=this._suppressCloseNotification;this._suppressCloseNotification=!1,t=e&&4001===e.code?"Invalid Connection":e&&e.reason?e.reason:"disconnected",n||this._notifyCallback(t),this._detachSocket()},r.prototype._handleError=function(e){this._suppressCloseNotification=!0,console.error("Socket error:",e),this._notifyCallback("Socket error")},r.prototype._handleMessage=function(e){var t,n;try{t=new Uint8Array(e.data)}catch(e){return void console.warn("Invalid socket payload:",e)}try{n=i.decode(t)}catch(e){return void console.warn("Failed to decode socket payload:",e)}var a=n&&n[0],r=n&&n[1];if("io-init"!==a){var o=this._handlers[a];if(o){var s=Array.isArray(r)?r:[r];try{o.apply(void 0,s)}catch(e){console.error("Handler for packet type '"+a+"' failed:",e)}}else console.warn("Unhandled packet type:",a)}else this.socketId=Array.isArray(r)?r[0]:r},r.prototype._normalizeHandlers=function(e){var t=Object.create(null);if(!e)return t;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&("function"==typeof e[n]?t[n]=e[n]:console.warn("Ignoring non-function handler for packet type:",n));return t},r.prototype._notifyCallback=function(e){try{this._callback(e)}catch(e){console.error("Socket callback failed:",e)}},r.prototype._detachSocket=function(){this.socket&&(this.socket.onopen=null,this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null,this.socket=null)},e.exports=new r,e.exports.IoClient=r},function(e,t,n){t.encode=n(9).encode,t.decode=n(14).decode,t.Encoder=n(35).Encoder,t.Decoder=n(36).Decoder,t.createCodec=n(37).createCodec,t.codec=n(38).codec},function(e,t,n){(function(t){function n(e){return e&&e.isBuffer&&e}e.exports=n(void 0!==t&&t)||n(this.Buffer)||n("undefined"!=typeof window&&window.Buffer)||this.Buffer}).call(this,n(11).Buffer)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){var t,n,i=c(e),o=i[0],s=i[1],l=new r(function(e,t,n){return 3*(t+n)/4-n}(0,o,s)),h=0,u=s>0?o-4:o;for(n=0;n<u;n+=4)t=a[e.charCodeAt(n)]<<18|a[e.charCodeAt(n+1)]<<12|a[e.charCodeAt(n+2)]<<6|a[e.charCodeAt(n+3)],l[h++]=t>>16&255,l[h++]=t>>8&255,l[h++]=255&t;2===s&&(t=a[e.charCodeAt(n)]<<2|a[e.charCodeAt(n+1)]>>4,l[h++]=255&t);1===s&&(t=a[e.charCodeAt(n)]<<10|a[e.charCodeAt(n+1)]<<4|a[e.charCodeAt(n+2)]>>2,l[h++]=t>>8&255,l[h++]=255&t);return l},t.fromByteArray=function(e){for(var t,n=e.length,a=n%3,r=[],o=0,s=n-a;o<s;o+=16383)r.push(h(e,o,o+16383>s?s:o+16383));1===a?(t=e[n-1],r.push(i[t>>2]+i[t<<4&63]+"==")):2===a&&(t=(e[n-2]<<8)+e[n-1],r.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return r.join("")};for(var i=[],a=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=o.length;s<l;++s)i[s]=o[s],a[o.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function h(e,t,n){for(var a,r,o=[],s=t;s<n;s+=3)a=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(i[(r=a)>>18&63]+i[r>>12&63]+i[r>>6&63]+i[63&r]);return o.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(e,t,n){var i=n(0);function a(e){return new Array(e)}(t=e.exports=a(0)).alloc=a,t.concat=i.concat,t.from=function(e){if(!i.isBuffer(e)&&i.isView(e))e=i.Uint8Array.from(e);else if(i.isArrayBuffer(e))e=new Uint8Array(e);else{if("string"==typeof e)return i.from.call(t,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(e)}},function(e,t,n){var i=n(0),a=i.global;function r(e){return new a(e)}(t=e.exports=i.hasBuffer?r(0):[]).alloc=i.hasBuffer&&a.alloc||r,t.concat=i.concat,t.from=function(e){if(!i.isBuffer(e)&&i.isView(e))e=i.Uint8Array.from(e);else if(i.isArrayBuffer(e))e=new Uint8Array(e);else{if("string"==typeof e)return i.from.call(t,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return a.from&&1!==a.from.length?a.from(e):new a(e)}},function(e,t,n){var i=n(0);function a(e){return new Uint8Array(e)}(t=e.exports=i.hasArrayBuffer?a(0):[]).alloc=a,t.concat=i.concat,t.from=function(e){if(i.isView(e)){var n=e.byteOffset,a=e.byteLength;(e=e.buffer).byteLength!==a&&(e.slice?e=e.slice(n,n+a):(e=new Uint8Array(e)).byteLength!==a&&(e=Array.prototype.slice.call(e,n,n+a)))}else{if("string"==typeof e)return i.from.call(t,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return new Uint8Array(e)}},function(e,t){t.copy=function(e,t,n,i){var a;n||(n=0);i||0===i||(i=this.length);t||(t=0);var r=i-n;if(e===this&&n<t&&t<i)for(a=r-1;a>=0;a--)e[a+t]=this[a+n];else for(a=0;a<r;a++)e[a+t]=this[a+n];return r},t.toString=function(e,t,n){var i=0|t;n||(n=this.length);var a="",r=0;for(;i<n;)(r=this[i++])<128?a+=String.fromCharCode(r):(192==(224&r)?r=(31&r)<<6|63&this[i++]:224==(240&r)?r=(15&r)<<12|(63&this[i++])<<6|63&this[i++]:240==(248&r)&&(r=(7&r)<<18|(63&this[i++])<<12|(63&this[i++])<<6|63&this[i++]),r>=65536?(r-=65536,a+=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):a+=String.fromCharCode(r));return a},t.write=function(e,t){var n=t||(t|=0),i=e.length,a=0,r=0;for(;r<i;)(a=e.charCodeAt(r++))<128?this[n++]=a:a<2048?(this[n++]=192|a>>>6,this[n++]=128|63&a):a<55296||a>57343?(this[n++]=224|a>>>12,this[n++]=128|a>>>6&63,this[n++]=128|63&a):(a=65536+(a-55296<<10|e.charCodeAt(r++)-56320),this[n++]=240|a>>>18,this[n++]=128|a>>>12&63,this[n++]=128|a>>>6&63,this[n++]=128|63&a);return n-t}},function(e,t,n){t.setExtPackers=function(e){e.addExtPacker(14,Error,[u,l]),e.addExtPacker(1,EvalError,[u,l]),e.addExtPacker(2,RangeError,[u,l]),e.addExtPacker(3,ReferenceError,[u,l]),e.addExtPacker(4,SyntaxError,[u,l]),e.addExtPacker(5,TypeError,[u,l]),e.addExtPacker(6,URIError,[u,l]),e.addExtPacker(10,RegExp,[h,l]),e.addExtPacker(11,Boolean,[c,l]),e.addExtPacker(12,String,[c,l]),e.addExtPacker(13,Date,[Number,l]),e.addExtPacker(15,Number,[c,l]),"undefined"!=typeof Uint8Array&&(e.addExtPacker(17,Int8Array,o),e.addExtPacker(18,Uint8Array,o),e.addExtPacker(19,Int16Array,o),e.addExtPacker(20,Uint16Array,o),e.addExtPacker(21,Int32Array,o),e.addExtPacker(22,Uint32Array,o),e.addExtPacker(23,Float32Array,o),"undefined"!=typeof Float64Array&&e.addExtPacker(24,Float64Array,o),"undefined"!=typeof Uint8ClampedArray&&e.addExtPacker(25,Uint8ClampedArray,o),e.addExtPacker(26,ArrayBuffer,o),e.addExtPacker(29,DataView,o));a.hasBuffer&&e.addExtPacker(27,r,a.from)};var i,a=n(0),r=a.global,o=a.Uint8Array.from,s={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function l(e){return i||(i=n(9).encode),i(e)}function c(e){return e.valueOf()}function h(e){(e=RegExp.prototype.toString.call(e).split("/")).shift();var t=[e.pop()];return t.unshift(e.join("/")),t}function u(e){var t={};for(var n in s)t[n]=e[n];return t}},function(e,t,n){var i=n(1),a=n(7),r=a.Uint64BE,o=a.Int64BE,s=n(0),l=n(6),c=n(32),h=n(12).uint8,u=n(4).ExtBuffer,d="undefined"!=typeof Uint8Array,f="undefined"!=typeof Map,p=[];p[1]=212,p[2]=213,p[4]=214,p[8]=215,p[16]=216,t.getWriteType=function(e){var t=c.getWriteToken(e),n=e&&e.useraw,a=d&&e&&e.binarraybuffer,m=a?s.isArrayBuffer:s.isBuffer,g=a?function(e,t){b(e,new Uint8Array(t))}:b,y=f&&e&&e.usemap?function(e,n){if(!(n instanceof Map))return x(e,n);var i=n.size;t[i<16?128+i:i<=65535?222:223](e,i);var a=e.codec.encode;n.forEach((function(t,n,i){a(e,n),a(e,t)}))}:x;return{boolean:function(e,n){t[n?195:194](e,n)},function:w,number:function(e,n){var i,a=0|n;if(n!==a)return void t[i=203](e,n);i=-32<=a&&a<=127?255&a:0<=a?a<=255?204:a<=65535?205:206:-128<=a?208:-32768<=a?209:210;t[i](e,a)},object:n?function(e,n){if(m(n))return function(e,n){var i=n.length;t[i<32?160+i:i<=65535?218:219](e,i),e.send(n)}(e,n);k(e,n)}:k,string:(v=n?function(e){return e<32?1:e<=65535?3:5}:function(e){return e<32?1:e<=255?2:e<=65535?3:5},function(e,n){var i=n.length,a=5+3*i;e.offset=e.reserve(a);var r=e.buffer,o=v(i),s=e.offset+o;i=l.write.call(r,n,s);var c=v(i);if(o!==c){var h=s+c-o,u=s+i;l.copy.call(r,r,h,s,u)}t[1===c?160+i:c<=3?215+c:219](e,i),e.offset+=i}),symbol:w,undefined:w};var v;function k(e,n){if(null===n)return w(e,n);if(m(n))return g(e,n);if(i(n))return function(e,n){var i=n.length;t[i<16?144+i:i<=65535?220:221](e,i);for(var a=e.codec.encode,r=0;r<i;r++)a(e,n[r])}(e,n);if(r.isUint64BE(n))return function(e,n){t[207](e,n.toArray())}(e,n);if(o.isInt64BE(n))return function(e,n){t[211](e,n.toArray())}(e,n);var a=e.codec.getExtPacker(n);if(a&&(n=a(n)),n instanceof u)return function(e,n){var i=n.buffer,a=i.length,r=p[a]||(a<255?199:a<=65535?200:201);t[r](e,a),h[n.type](e),e.send(i)}(e,n);y(e,n)}function w(e,n){t[192](e,n)}function b(e,n){var i=n.length;t[i<255?196:i<=65535?197:198](e,i),e.send(n)}function x(e,n){var i=Object.keys(n),a=i.length;t[a<16?128+a:a<=65535?222:223](e,a);var r=e.codec.encode;i.forEach((function(t){r(e,t),r(e,n[t])}))}}},function(e,t,n){var i=n(5),a=n(7),r=a.Uint64BE,o=a.Int64BE,s=n(12).uint8,l=n(0),c=l.global,h=l.hasBuffer&&"TYPED_ARRAY_SUPPORT"in c&&!c.TYPED_ARRAY_SUPPORT,u=l.hasBuffer&&c.prototype||{};function d(){var e=s.slice();return e[196]=f(196),e[197]=p(197),e[198]=m(198),e[199]=f(199),e[200]=p(200),e[201]=m(201),e[202]=g(202,4,u.writeFloatBE||k,!0),e[203]=g(203,8,u.writeDoubleBE||w,!0),e[204]=f(204),e[205]=p(205),e[206]=m(206),e[207]=g(207,8,y),e[208]=f(208),e[209]=p(209),e[210]=m(210),e[211]=g(211,8,v),e[217]=f(217),e[218]=p(218),e[219]=m(219),e[220]=p(220),e[221]=m(221),e[222]=p(222),e[223]=m(223),e}function f(e){return function(t,n){var i=t.reserve(2),a=t.buffer;a[i++]=e,a[i]=n}}function p(e){return function(t,n){var i=t.reserve(3),a=t.buffer;a[i++]=e,a[i++]=n>>>8,a[i]=n}}function m(e){return function(t,n){var i=t.reserve(5),a=t.buffer;a[i++]=e,a[i++]=n>>>24,a[i++]=n>>>16,a[i++]=n>>>8,a[i]=n}}function g(e,t,n,i){return function(a,r){var o=a.reserve(t+1);a.buffer[o++]=e,n.call(a.buffer,r,o,i)}}function y(e,t){new r(this,t,e)}function v(e,t){new o(this,t,e)}function k(e,t){i.write(this,e,t,!1,23,4)}function w(e,t){i.write(this,e,t,!1,52,8)}t.getWriteToken=function(e){return e&&e.uint8array?((t=d())[202]=g(202,4,k),t[203]=g(203,8,w),t):h||l.hasBuffer&&e&&e.safe?function(){var e=s.slice();return e[196]=g(196,1,c.prototype.writeUInt8),e[197]=g(197,2,c.prototype.writeUInt16BE),e[198]=g(198,4,c.prototype.writeUInt32BE),e[199]=g(199,1,c.prototype.writeUInt8),e[200]=g(200,2,c.prototype.writeUInt16BE),e[201]=g(201,4,c.prototype.writeUInt32BE),e[202]=g(202,4,c.prototype.writeFloatBE),e[203]=g(203,8,c.prototype.writeDoubleBE),e[204]=g(204,1,c.prototype.writeUInt8),e[205]=g(205,2,c.prototype.writeUInt16BE),e[206]=g(206,4,c.prototype.writeUInt32BE),e[207]=g(207,8,y),e[208]=g(208,1,c.prototype.writeInt8),e[209]=g(209,2,c.prototype.writeInt16BE),e[210]=g(210,4,c.prototype.writeInt32BE),e[211]=g(211,8,v),e[217]=g(217,1,c.prototype.writeUInt8),e[218]=g(218,2,c.prototype.writeUInt16BE),e[219]=g(219,4,c.prototype.writeUInt32BE),e[220]=g(220,2,c.prototype.writeUInt16BE),e[221]=g(221,4,c.prototype.writeUInt32BE),e[222]=g(222,2,c.prototype.writeUInt16BE),e[223]=g(223,4,c.prototype.writeUInt32BE),e}():d();var t}},function(e,t,n){t.setExtUnpackers=function(e){e.addExtUnpacker(14,[s,c(Error)]),e.addExtUnpacker(1,[s,c(EvalError)]),e.addExtUnpacker(2,[s,c(RangeError)]),e.addExtUnpacker(3,[s,c(ReferenceError)]),e.addExtUnpacker(4,[s,c(SyntaxError)]),e.addExtUnpacker(5,[s,c(TypeError)]),e.addExtUnpacker(6,[s,c(URIError)]),e.addExtUnpacker(10,[s,l]),e.addExtUnpacker(11,[s,h(Boolean)]),e.addExtUnpacker(12,[s,h(String)]),e.addExtUnpacker(13,[s,h(Date)]),e.addExtUnpacker(15,[s,h(Number)]),"undefined"!=typeof Uint8Array&&(e.addExtUnpacker(17,h(Int8Array)),e.addExtUnpacker(18,h(Uint8Array)),e.addExtUnpacker(19,[u,h(Int16Array)]),e.addExtUnpacker(20,[u,h(Uint16Array)]),e.addExtUnpacker(21,[u,h(Int32Array)]),e.addExtUnpacker(22,[u,h(Uint32Array)]),e.addExtUnpacker(23,[u,h(Float32Array)]),"undefined"!=typeof Float64Array&&e.addExtUnpacker(24,[u,h(Float64Array)]),"undefined"!=typeof Uint8ClampedArray&&e.addExtUnpacker(25,h(Uint8ClampedArray)),e.addExtUnpacker(26,u),e.addExtUnpacker(29,[u,h(DataView)]));a.hasBuffer&&e.addExtUnpacker(27,h(r))};var i,a=n(0),r=a.global,o={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function s(e){return i||(i=n(14).decode),i(e)}function l(e){return RegExp.apply(null,e)}function c(e){return function(t){var n=new e;for(var i in o)n[i]=t[i];return n}}function h(e){return function(t){return new e(t)}}function u(e){return new Uint8Array(e).buffer}},function(e,t,n){var i=n(16);function a(e){var t,n=new Array(256);for(t=0;t<=127;t++)n[t]=r(t);for(t=128;t<=143;t++)n[t]=s(t-128,e.map);for(t=144;t<=159;t++)n[t]=s(t-144,e.array);for(t=160;t<=191;t++)n[t]=s(t-160,e.str);for(n[192]=r(null),n[193]=null,n[194]=r(!1),n[195]=r(!0),n[196]=o(e.uint8,e.bin),n[197]=o(e.uint16,e.bin),n[198]=o(e.uint32,e.bin),n[199]=o(e.uint8,e.ext),n[200]=o(e.uint16,e.ext),n[201]=o(e.uint32,e.ext),n[202]=e.float32,n[203]=e.float64,n[204]=e.uint8,n[205]=e.uint16,n[206]=e.uint32,n[207]=e.uint64,n[208]=e.int8,n[209]=e.int16,n[210]=e.int32,n[211]=e.int64,n[212]=s(1,e.ext),n[213]=s(2,e.ext),n[214]=s(4,e.ext),n[215]=s(8,e.ext),n[216]=s(16,e.ext),n[217]=o(e.uint8,e.str),n[218]=o(e.uint16,e.str),n[219]=o(e.uint32,e.str),n[220]=o(e.uint16,e.array),n[221]=o(e.uint32,e.array),n[222]=o(e.uint16,e.map),n[223]=o(e.uint32,e.map),t=224;t<=255;t++)n[t]=r(t-256);return n}function r(e){return function(){return e}}function o(e,t){return function(n){var i=e(n);return t(n,i)}}function s(e,t){return function(n){return t(n,e)}}t.getReadToken=function(e){var t=i.getReadFormat(e);return e&&e.useraw?function(e){var t,n=a(e).slice();for(n[217]=n[196],n[218]=n[197],n[219]=n[198],t=160;t<=191;t++)n[t]=s(t-160,e.bin);return n}(t):a(t)}},function(e,t,n){t.Encoder=r;var i=n(17),a=n(10).EncodeBuffer;function r(e){if(!(this instanceof r))return new r(e);a.call(this,e)}r.prototype=new a,i.mixin(r.prototype),r.prototype.encode=function(e){this.write(e),this.emit("data",this.read())},r.prototype.end=function(e){arguments.length&&this.encode(e),this.flush(),this.emit("end")}},function(e,t,n){t.Decoder=r;var i=n(17),a=n(15).DecodeBuffer;function r(e){if(!(this instanceof r))return new r(e);a.call(this,e)}r.prototype=new a,i.mixin(r.prototype),r.prototype.decode=function(e){arguments.length&&this.write(e),this.flush()},r.prototype.push=function(e){this.emit("data",e)},r.prototype.end=function(e){this.decode(e),this.emit("end")}},function(e,t,n){n(8),n(3),t.createCodec=n(2).createCodec},function(e,t,n){n(8),n(3),t.codec={preset:n(2).preset}},function(e,t){var n=Math.abs,i=(Math.cos,Math.sin,Math.pow,Math.sqrt);n=Math.abs;var a=Math.atan2,r=Math.PI;e.exports.randInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.exports.randFloat=function(e,t){return Math.random()*(t-e+1)+e},e.exports.lerp=function(e,t,n){return e+(t-e)*n},e.exports.decel=function(e,t){return e>0?e=Math.max(0,e-t):e<0&&(e=Math.min(0,e+t)),e},e.exports.getDistance=function(e,t,n,a){return i((n-=e)*n+(a-=t)*a)},e.exports.getDirection=function(e,t,n,i){return a(t-i,e-n)},e.exports.getAngleDist=function(e,t){var i=n(t-e)%(2*r);return i>r?2*r-i:i},e.exports.isNumber=function(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)},e.exports.isString=function(e){return e&&"string"==typeof e},e.exports.kFormat=function(e){var t=["","k","m","b","t","Qa","Qi","Sx","Sp","Oc","No","De","Ud","Dd","Td","Qad","Qid","Sxd","Spd","Ocd","Nod","Vig","Uv","Dv","Tv","Qav","Qiv","Sxv","Spv","Ocv","Nov","Trig","Ut","Dt","Tt","Qat","Qit","Sxt","Spt","Oct","Not","Qag","Uq","Dq","Tq","Qaq","Qiq","Sxq","Spq","Ocq","Noq","Quin","Sex","Sep","Octo","Nano","Deca"];if(!isFinite(e))return"";if(e<1e3)return String(e);var n=Math.floor(Math.log10(e)/3);return n>=t.length?"":(e/Math.pow(10,3*n)).toFixed(1).replace(/\.0$/,"")+t[n]},e.exports.capitalizeFirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.exports.fixTo=function(e,t){return parseFloat(e.toFixed(t))},e.exports.sortByPoints=function(e,t){return parseFloat(t.points)-parseFloat(e.points)},e.exports.lineInRect=function(e,t,n,i,a,r,o,s){var l=a,c=o;if(a>o&&(l=o,c=a),c>n&&(c=n),l<e&&(l=e),l>c)return!1;var h=r,u=s,d=o-a;if(Math.abs(d)>1e-7){var f=(s-r)/d,p=r-f*a;h=f*l+p,u=f*c+p}if(h>u){var m=u;u=h,h=m}return u>i&&(u=i),h<t&&(h=t),!(h>u)},e.exports.containsPoint=function(e,t,n){var i=e.getBoundingClientRect(),a=i.left+window.scrollX,r=i.top+window.scrollY,o=i.width,s=i.height;return t>a&&t<a+o&&(n>r&&n<r+s)},e.exports.mousifyTouchEvent=function(e){var t=e.changedTouches[0];e.screenX=t.screenX,e.screenY=t.screenY,e.clientX=t.clientX,e.clientY=t.clientY,e.pageX=t.pageX,e.pageY=t.pageY},e.exports.hookTouchEvents=function(t,n){var i=!n,a=!1;function r(n){e.exports.mousifyTouchEvent(n),window.setUsingTouch(!0),i&&(n.preventDefault(),n.stopPropagation()),a&&(t.onclick&&t.onclick(n),t.onmouseout&&t.onmouseout(n),a=!1)}t.addEventListener("touchstart",e.exports.checkTrusted((function(n){e.exports.mousifyTouchEvent(n),window.setUsingTouch(!0),i&&(n.preventDefault(),n.stopPropagation());t.onmouseover&&t.onmouseover(n);a=!0})),!1),t.addEventListener("touchmove",e.exports.checkTrusted((function(n){e.exports.mousifyTouchEvent(n),window.setUsingTouch(!0),i&&(n.preventDefault(),n.stopPropagation());e.exports.containsPoint(t,n.pageX,n.pageY)?a||(t.onmouseover&&t.onmouseover(n),a=!0):a&&(t.onmouseout&&t.onmouseout(n),a=!1)})),!1),t.addEventListener("touchend",e.exports.checkTrusted(r),!1),t.addEventListener("touchcancel",e.exports.checkTrusted(r),!1),t.addEventListener("touchleave",e.exports.checkTrusted(r),!1)},e.exports.removeAllChildren=function(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)},e.exports.generateElement=function(t){var n=document.createElement(t.tag||"div");function i(e,i){t[e]&&(n[i]=t[e])}for(var a in i("text","textContent"),i("html","innerHTML"),i("class","className"),t){switch(a){case"tag":case"text":case"html":case"class":case"style":case"hookTouch":case"parent":case"children":continue}n[a]=t[a]}if(n.onclick&&(n.onclick=e.exports.checkTrusted(n.onclick)),n.onmouseover&&(n.onmouseover=e.exports.checkTrusted(n.onmouseover)),n.onmouseout&&(n.onmouseout=e.exports.checkTrusted(n.onmouseout)),t.style&&(n.style.cssText=t.style),t.hookTouch&&e.exports.hookTouchEvents(n),t.parent&&t.parent.appendChild(n),t.children)for(var r=0;r<t.children.length;r++)n.appendChild(t.children[r]);return n},e.exports.eventIsTrusted=function(e){return!e||"boolean"!=typeof e.isTrusted||e.isTrusted},e.exports.checkTrusted=function(t){return function(n){n&&n instanceof Event&&e.exports.eventIsTrusted(n)&&t(n)}},e.exports.randomString=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},e.exports.countInArray=function(e,t){for(var n=0,i=0;i<e.length;i++)e[i]===t&&n++;return n}},function(e,t){e.exports.AnimText=function(){this.init=function(e,t,n,i,a,r,o){this.x=e,this.y=t,this.color=o,this.scale=n,this.startScale=this.scale,this.maxScale=2.25*n,this.scaleSpeed=.